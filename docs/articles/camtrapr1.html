<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1. Organising raw camera trap images in camtrapR • camtrapR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="1. Organising raw camera trap images in camtrapR">
<meta property="og:description" content="camtrapR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
    <li>
      <a href="../articles/camtrapr5.html">5. Multi-species occupancy models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jniedballa/camtrapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1. Organising raw camera trap images in
camtrapR</h1>
                        <h4 data-toc-skip class="author">Juergen
Niedballa (<a href="mailto:camtrapr@gmail.com" class="email">camtrapr@gmail.com</a>)</h4>
            
            <h4 data-toc-skip class="date">2024-02-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jniedballa/camtrapR/blob/HEAD/vignettes/camtrapr1.Rmd" class="external-link"><code>vignettes/camtrapr1.Rmd</code></a></small>
      <div class="hidden name"><code>camtrapr1.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>camtrapR</strong> provides functions for organising and
managing camera trap images and for the preparation of occupancy and
(spatial) capture-recapture analyses. The package handles JPG images and
supports video files.</p>
<p>The five vignettes demonstrate the camtrapR workflow using the sample
data set that is included in the package. Sample data were generated in
a camera trapping survey in Sabah, Malaysian Borneo (A. Mohamed <em>et
al. J. Mammal.</em>, 94, 82-89; 2013).</p>
<p>camtrapR is compatible with other software for camera trap data
management. If you prefer to manage images and identify species using
other software, you can usually do so. For example, Camelot and TRAPPER
can export csv files that can be used as input for camtrapR. To maximize
compatibility, camtrapR uses a simple data structure and standard data
types (data frames and matrices) to store information about the camera
trap survey and the detected species and individuals in separate data
frames.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the newest stable version from CRAN via:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"camtrapR"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can install the development version with the
latest features and bugfixes from GitHub (requires package remotes):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"jniedballa/camtrapR"</span><span class="op">)</span></span></code></pre></div>
<p>Afterwards, load camtrapR via:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jniedballa/camtrapR" class="external-link">camtrapR</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p>The latest vignettes, function reference and changelog can be found
on the <a href="https://jniedballa.github.io/camtrapR/" class="external-link">camtrapR GitHub
pages</a> or the <a href="https://CRAN.R-project.org/package=camtrapR" class="external-link">camtrapR page on
CRAN</a>. Source code can be found on <a href="https://github.com/jniedballa/camtrapR" class="external-link">GitHub</a>.</p>
</div>
<div class="section level3">
<h3 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h3>
<p>The camtrapR workflow consists of a series of functions that build
upon one another in a logical sequence. Below is a list of functions
grouped by work steps. Detailed information about each function can be
found in the sections below, as well as in the other vignettes and the
function help files.</p>
<ul>
<li>Organising raw images</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>createStationFolders</code></li>
<li>
<code>fixDateTimeOriginal</code> (only if necessary)</li>
<li>
<code>timeShiftImages</code> (only if necessary)</li>
<li><code>imageRename</code></li>
<li><code>addCopyrightTag</code></li>
</ol>
<ul>
<li>Species identification and data extraction</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>checkSpeciesNames</code></li>
<li><code>createSpeciesFolders</code></li>
<li><code>checkSpeciesIdentification</code></li>
<li><code>appendSpeciesNames</code></li>
<li><code>exifTagNames</code></li>
<li><code>recordTable</code></li>
</ol>
<ul>
<li>Data exploration and visualisation (species-level)</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>detectionMaps</code></li>
<li><code>activityHistogram</code></li>
<li><code>activityDensity</code></li>
<li><code>activityRadial</code></li>
<li><code>activityOverlap</code></li>
<li><code>surveyReport</code></li>
</ol>
<ul>
<li>Individual identification and data extraction</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>getSpeciesImages</code></li>
<li><code>recordTableIndividual</code></li>
</ol>
<ul>
<li>Preparing input for subsequent analyses</li>
</ul>
<ol style="list-style-type: decimal">
<li><code>cameraOperation</code></li>
<li>
<code>detectionHistory</code> (for occupancy analyses)</li>
<li>
<code>spatialDetectionHistory</code> (for spatial capture-recapture
analyses)</li>
<li>
<code>communityModel</code> (for multi-species occupancy
models)</li>
</ol>
</div>
<div class="section level3">
<h3 id="general-sampling-situation">General sampling situation<a class="anchor" aria-label="anchor" href="#general-sampling-situation"></a>
</h3>
<p>camtrapR was designed for camera trapping surveys in which an array
of camera trap stations (each consisting of one or more camera traps per
station) is operated in a study area. The vignettes will provide a
guideline for how to use camtrapR in different sampling situations.</p>
</div>
<div class="section level3">
<h3 id="video-support-since-version-2-0-0">Video support (since version 2.0.0)<a class="anchor" aria-label="anchor" href="#video-support-since-version-2-0-0"></a>
</h3>
<p>Since version 2.0.0, the functions <code>recordTable</code> and
<code>recordTableIndividual</code> support video files. In addition
<code>exifTagNames</code> can read and display video metadata via
ExifTool.</p>
<p>Video support allows you to process video files and identify species
and individuals using the same workflow as for images. With minimal
effort, you can extract and tabulate these information using the
familiar functions within camtrapR.</p>
<p>Since this is a new feature, please be sure to read the vignette
sections on video and the help files of the relevant functions and check
the example code. Also, please test the workflow before working on
larger amounts of data. Unfortunately, I could not include a sample
video in the package due to file size constraints, but I hope you will
get the idea. And please, let me know about your experiences working
with videos in camtrapR and possible problems. I would really appreciate
the feedback to inmprove and extend video support.</p>
<div class="section level4">
<h4 id="video-datetime">Video date/time<a class="anchor" aria-label="anchor" href="#video-datetime"></a>
</h4>
<p>The main problem in working with videos is the lack of a standardized
date/time tag in the metadata. Only if such a tag is present, camtrapR
can successfully extract the video date/time. Not all cameras save date
and time in a suitable format in the metadata, so before conducting a
study using videos, please make sure that your cameras record a suitable
(i.e., persistent) date/time tag in the metadata. You can check if there
is a suitable tag available in the video metadata:</p>
<ol style="list-style-type: decimal">
<li>Use <code>exifTagNames</code> to identify a usable video date/time
tag</li>
<li>provide the name of the video date/time tag to
<code>recordTable</code>
</li>
</ol>
<p>When using <code>exifTagNames</code>, make sure the date/time tag you
choose is identical to the date/time shown in the data field of the
video. In the example videos I tests, tags such as
“QuickTime:CreateDate” worked well. The tags “File Creation Date/Time”,
“File Modification Date/Time” and “File Access Date/Time” are not
suitable, since they are updated when the video files are moved or
copied.</p>
<p>This also means that if there is no suitable date/time tag in the
video metadata, camtrapR will not be able to return information for
these videos and will omit them. It really depends on your camera model.
So if you consider using video for your surveys, please first check
(with that specific camera model) if there is a suitable date/time tag
in the video metadata. A suitable date/time tag is one that doesn’t
change when the video file is moved, copied or otherwise modified. If a
camera fails to record such a tag, camtrapR can’t return proper date and
time, making the videos useless.</p>
</div>
<div class="section level4">
<h4 id="digikam-tags-metadata">digiKam tags &amp; metadata<a class="anchor" aria-label="anchor" href="#digikam-tags-metadata"></a>
</h4>
<p>In digiKam, it is possible to assign tags to videos. Just like
images, videos can be tagged with species or individual IDs, group size,
sex, age group or whatever information you are interested in. BUT, in
contrast to JPG images, digiKam cannot write these tags directly into
the video metadata. Instead, video tags are stored in the digiKam
database on your hard disk. To access tags assigned to videos, camtrapR
has to read them directly from the digiKam database. This means that in
order for camtrapR to read video tags, the videos need to be included in
the digiKam database. Moving or copying the videos to a different
location will strip the tags you assigned.</p>
<p>Users need to provide the filename of the digiKam database and the
directory it is in (digiKam &gt; Settings &gt; configure digiKam &gt;
Database; the directory is stated there). In that menu, also ensure you
use a SQLite database (the default). When the digiKam database
information are provided to camtrapR, all the tags you assigned to
videos in digiKam will be extracted and tabulated just like image tags.
See the help files of <code>recordTable</code> and
<code>recordTableIndividual</code> for details.</p>
</div>
</div>
<div class="section level3">
<h3 id="nomenclature">Nomenclature<a class="anchor" aria-label="anchor" href="#nomenclature"></a>
</h3>
<p>To facilitate understanding here is a glossary on how we use specific
terms. It is standard camera trapping nomenclature.</p>
<ul>
<li>station: a station is a locality containing one or more camera traps
(often a pair of two)</li>
<li>camera trap: refers to the individual camera unit. One or more
(often two) constitute a station</li>
<li>occasion: a distinct sampling event of 1 or more days</li>
<li>effort: number of active trapping days per station and occasion</li>
</ul>
</div>
<div class="section level3">
<h3 id="exiftool">ExifTool<a class="anchor" aria-label="anchor" href="#exiftool"></a>
</h3>
<p>camtrapR relies on the free and open-source software
<strong>ExifTool</strong> written by Phil Harvey to extract metadata
from images. ExifTool is freely available <a href="https://exiftool.org/" class="external-link">here</a> and runs on Windows, Linux and
MacOS. In order to use it, your system must be able to find the
software. On MacOS, Linux and Unix it needs installation and should
afterwards be found by the system without problems. How to set up
Exiftool for Windows is detailed below. General installation instruction
can be found <a href="https://exiftool.org/install.html" class="external-link">here</a>.</p>
<div class="section level4">
<h4 id="exiftool-for-windows">ExifTool for Windows<a class="anchor" aria-label="anchor" href="#exiftool-for-windows"></a>
</h4>
<p>On Windows, ExifTool does not need installation. In order for Windows
to be able to find ExifTool, follow the instructions found <a href="https://exiftool.org/install.html" class="external-link">here</a>. Be sure to download
the stand-alone executable. The download file is a .zip which you need
to unzip, rename the contained “exiftool(-k).exe” file to “exiftool.exe”
and place it in, e.g., C:/Windows. Windows will be able to find ExifTool
if exiftool.exe is placed in a directory that is contained in the
Windows PATH variable (e.g. C:/Windows).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check which directories are in PATH (output not shown here)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if the system can find Exiftool (if output is empty "", system can't find Exiftool)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"exiftool"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                     exiftool </span></span>
<span><span class="co">## "C:\\PR2A0A~1\\exiftool.exe"</span></span></code></pre>
<p>If exiftool.exe cannot be placed in a PATH directory (e.g. due to
limited user privileges), users can place exiftool.exe in any directory
and then add that directory to PATH temporarily for use in the running R
session using the function <code>exiftoolPath</code>. This is necessary
if the directory containing exiftool.exe is not in PATH by default.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this is a dummy example assuming the directory structure: C:/Path/To/Exiftool/exiftool.exe</span></span>
<span><span class="va">exiftool_dir</span> <span class="op">&lt;-</span> <span class="st">"C:/Path/To/Exiftool"</span>        </span>
<span><span class="fu"><a href="../reference/exiftoolPath.html">exiftoolPath</a></span><span class="op">(</span>exiftoolDir <span class="op">=</span> <span class="va">exiftool_dir</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in exiftoolPath(exiftoolDir = exiftool_dir): The 'exiftoolPath'</span></span>
<span><span class="co">## function is deprecated. Please use 'addToPath' instead.</span></span></code></pre>
<p>Afterwards, Windows (via R) should be able to find ExifTool during
the active session.</p>
</div>
<div class="section level4">
<h4 id="exiftool-performance">ExifTool performance<a class="anchor" aria-label="anchor" href="#exiftool-performance"></a>
</h4>
<p>ExifTool is the performance bottleneck of the package functions. It
can extract metadata at a rate of about 160 images per second (approx.
10,000 images per minute, measured on a laptop computer running Windows
7, Intel Core i5-2410M / 2.3 GHz, 6 GB RAM). Performance tends to be
lower when ExifTool is first called and increases afterwards; and it
decreases in situations with numerous camera trap stations with few
images each (because ExifTool is called separately on every station
directory and the associated overhead of loading ExifTool each
time).</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="camera-trap-station-information">Camera trap station information<a class="anchor" aria-label="anchor" href="#camera-trap-station-information"></a>
</h2>
<p>Before looking at how images are handled, let’s first familiarise
ourselves with how information about camera trap stations are stored.
Camera trap station information are tabulated in a simple data frame
with 1 row per station (if there was 1 camera per station) or 1 row per
camera (if there was more than 1 camera per station). Information to be
stored in this table are: station (and camera) IDs, geographic
coordinates, setup and retrieval dates and possible dates when camera
were not operational (because of malfunction, animal interference, empty
batteries, full memory cards etc.). The table can be generated standard
spreadsheet software and loaded into R.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># here is a sample camera trap station table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"camtraps"</span><span class="op">)</span></span>
<span><span class="va">camtraps</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station  utm_y  utm_x Setup_date Retrieval_date Problem1_from Problem1_to</span></span>
<span><span class="co">## 1 StationA 604000 526000 02/04/2009     14/05/2009                          </span></span>
<span><span class="co">## 2 StationB 606000 523000 03/04/2009     16/05/2009                          </span></span>
<span><span class="co">## 3 StationC 607050 525000 04/04/2009     17/05/2009    12/05/2009  17/05/2009</span></span></code></pre>
<p>Note that the sample data contain only one camera per station. Thus,
there is no need to differentiate between station and camera IDs. If
there was more than one camera per station, an additional column for
camera IDs would be needed. Consequently, there would be one row for
each camera and thus several rows per station.</p>
<div class="section level3">
<h3 id="station-camera-ids">Station / Camera IDs<a class="anchor" aria-label="anchor" href="#station-camera-ids"></a>
</h3>
<p>Station and camera IDs can be any combination of characters and
numbers. Please don’t use underscores though, and more specifically,
don’t use double underscores ("__"), as these are used in a number of
functions to separate bits of information (e.g. in file names created by
<code>imageRename</code> or row names in
<code>cameraOperation</code>).</p>
</div>
<div class="section level3">
<h3 id="column-names">Column names<a class="anchor" aria-label="anchor" href="#column-names"></a>
</h3>
<p>Column names in camtrapR are not prescribed, allowing users the
freedom to name their data as they wish, with one exception detailed
below. In the sample table, ‘Station’ contains station IDs, ‘utm_y’ and
‘utm_x’ contain the station’s geographic coordinates. ‘Setup_date’ and
‘Retrieval_date’ are the dates the stations were set up and retrieved
from the field. All of these column names can be user-defined.</p>
<p>‘Problem1_from’ and ‘Problem1_to’ are optional columns to specify
periods in which cameras/stations were not operational. If cameras or
stations malfunctioned repeatedly, additional pairs of columns such as
‘Problem2_from’ and ‘Problem2_to’ can be added. These column names must
follow the given pattern.</p>
</div>
<div class="section level3">
<h3 id="date-format">Date format<a class="anchor" aria-label="anchor" href="#date-format"></a>
</h3>
<p>All dates in this table (setup, retrieval and problem columns) should
be of data type "character" and can be formatted in any way that
function <code>as.Date</code> can interpret. Since version 1.2, camtrapR
also supports the more flexible and convenient naming conventions of
package <code>lubridate</code>, which makes it easier to specify dates
correctly.</p>
<p><strong>camtrapR</strong> by default assumes the standard format
"YYYY-MM-DD", e.g. "2015-12-31", and we recommend to use that format (it
is also best for sorting by date). In any case, the date format must be
consistent between the various date columns.</p>
<p>Two functions (<code>cameraOperation</code>,
<code>surveyReport</code>) utilize these date information and therefore
contain arguments to specify the date format (<code>dateFormat</code>
and <code>CTDateFormat</code>, respectively). These arguments are used
to interpret the character string in the table (e.g. "2015-12-31") as a
date.</p>
<p>If these arguments contain the character “%” (characteristic of the
format argument to <code>strptime</code>), they are passed to function
<code>as.Date</code> as argument <code>format</code>. If they don’t
contain character “%”, they are interpreted as <code>orders</code>
arguments to the function <code>parse_date_time</code> in the
<code>lubridate</code> package.</p>
<p>Details on how to set it correctly can be found in the Details
section of the help files of functions <code>as.Date</code> and
<code>strptime</code> or <code>parse_date_time</code>.</p>
<p><a href="https://www.r-bloggers.com/2013/08/date-formats-in-r/" class="external-link">Here
is some information about date format in base R</a>.</p>
<p><a href="https://lubridate.tidyverse.org/" class="external-link">Here is some information
about date format in lubridate</a>.</p>
<p>Here are a few examples for December 1st 2015 ("generic" is the
abstract representation of your date string (Y = year, M = month, D =
day), "example" is a formatted example and "dateFormat argument" is what
you’d specify in <code>dateFormat</code> and <code>CTDateFormat</code>
in either the base R or <code>lubridate</code> naming convention):</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>generic</th>
<th>example</th>
<th>dateFormat argument (base)</th>
<th>dateFormat argument (lubridate)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>"YYYY-MM-DD"</td>
<td>"2015-12-01"</td>
<td>"%Y-%m-%d"</td>
<td>"ymd"</td>
</tr>
<tr class="even">
<td>"YYYY/MM/DD"</td>
<td>"2015/12/01"</td>
<td>"%Y/%m/%d"</td>
<td>"ymd"</td>
</tr>
<tr class="odd">
<td>"YYYY/MM/DD"</td>
<td>"2015/12/1"</td>
<td>"%Y/%m/%d"</td>
<td>"ymd"</td>
</tr>
<tr class="even">
<td>"MM/DD/YY"</td>
<td>"12/01/15"</td>
<td>"%m/%d/%y"</td>
<td>"mdy"</td>
</tr>
<tr class="odd">
<td>"YYYYMMDD"</td>
<td>"20151201"</td>
<td>"%Y%m%d"</td>
<td>"ymd"</td>
</tr>
<tr class="even">
<td>"DD.MM.YY"</td>
<td>"1.12.15"</td>
<td>"%d.%m.%y"</td>
<td>"dmy"</td>
</tr>
<tr class="odd">
<td>"DD-MMM-YY"</td>
<td>"01-Dec-15"</td>
<td>"%d-%b-%y"</td>
<td>"dmy"</td>
</tr>
</tbody>
</table>
<p>In the sample table (<code>camtraps</code>), we use another date
format for demonstration purposes.</p>
<p>Data type of the ID and date columns in the table must be
<code>character</code> or <code>factor</code>. Please don’t use data
type <code>Date</code>. You can turn data type <code>Date</code> into
<code>character</code> using <code>as.character</code>.</p>
</div>
<div class="section level3">
<h3 id="station--camera-level-covariates">Station-/ Camera-level covariates<a class="anchor" aria-label="anchor" href="#station--camera-level-covariates"></a>
</h3>
<p>If needed, station-/camera-level covariates can be specified in this
table, e.g. trail or habitat type, camera model etc. They can later be
used as covariates, e.g. in occupancy models.</p>
</div>
</div>
<div class="section level2">
<h2 id="organising-raw-camera-trap-images">Organising raw camera trap images<a class="anchor" aria-label="anchor" href="#organising-raw-camera-trap-images"></a>
</h2>
<p>After collecting images from camera traps, the images are saved into
a directory structure like this:</p>
<blockquote>
<p>rawImages/stationA</p>
</blockquote>
<blockquote>
<p>rawImages/stationB</p>
</blockquote>
<p>If there was more than 1 camera per station, the station directories
must contain camera subdirectories, e.g.</p>
<blockquote>
<p>rawImages/stationA/camera1</p>
</blockquote>
<blockquote>
<p>rawImages/stationA/camera2</p>
</blockquote>
<p>If you have more than 1 camera per station but don’t separate the
images from different cameras at this stage, you will not be able to do
so at a later point. Later in the workflow, you can decide whether you
would like to keep them separate or merge them (in the function
<code>imageRename</code>).</p>
<p>Generally, you should not work on your raw data and instead keep them
as a backup. If you rename you images with <code>imageRename</code>, the
whole camtrapR workflow will take place in a copy of the images to
prevent data loss.</p>
<p>Another important point is not to save any other data besides images
in image directories. It may interfere with the operation of the package
and ExifTool.</p>
<div class="section level3">
<h3 id="saving-raw-images-on-your-hard-disk">Saving raw images on your hard disk<a class="anchor" aria-label="anchor" href="#saving-raw-images-on-your-hard-disk"></a>
</h3>
<p>The directories for the raw images can be created automatically using
the function <code>createStationFolders</code> and the camera trap
station table. As mentioned above, images can either be stored in
station directories (if there was 1 camera per station) or in
station/camera directories (if there was &gt;1 camera per station). The
behaviour is controlled by the function argument <code>cameras</code>.
It specifies the camera ID column in the camera trap information table.
If it is defined, camera subdirectories will be created within the
station directories.</p>
<p>Here is an example in which station directories without camera
subdirectories are created.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a temporary dummy directory for tests</span></span>
<span><span class="co"># (normally, you'd set up an empty directory in a proper place, e.g. .../myStudy/rawImages)</span></span>
<span><span class="va">wd_createStationDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>, <span class="st">"createStationFoldersTest"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create station directories in  wd_createStationDir</span></span>
<span><span class="va">StationFolderCreate1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createStationFolders.html">createStationFolders</a></span> <span class="op">(</span>inDir       <span class="op">=</span> <span class="va">wd_createStationDir</span>,</span>
<span>                                              stations    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">camtraps</span><span class="op">$</span><span class="va">Station</span><span class="op">)</span>, </span>
<span>                                              createinDir <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## created 3 directories</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">StationFolderCreate1</span></span></code></pre></div>
<pre><code><span><span class="co">##    station</span></span>
<span><span class="co">## 1 StationA</span></span>
<span><span class="co">## 2 StationB</span></span>
<span><span class="co">## 3 StationC</span></span>
<span><span class="co">##                                                                            directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/createStationFoldersTest/StationA</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/createStationFoldersTest/StationB</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/createStationFoldersTest/StationC</span></span>
<span><span class="co">##   created exists</span></span>
<span><span class="co">## 1    TRUE   TRUE</span></span>
<span><span class="co">## 2    TRUE   TRUE</span></span>
<span><span class="co">## 3    TRUE   TRUE</span></span></code></pre>
<p><strong>IMPORTANT:</strong> Please note that in this vignette station
directories are set up in a temporary directory. That does not make any
sense in real life and is done here solely to demonstrate how the
functions works. So please don’t do this at home! Instead, always work
in permanent directories!</p>
<p>Once the directories are created, you can copy over your images from
the memory cards.</p>
</div>
<div class="section level3">
<h3 id="shifting-date-and-time-of-images">Shifting date and time of images<a class="anchor" aria-label="anchor" href="#shifting-date-and-time-of-images"></a>
</h3>
<p>There are situations in which the date and time of your images may be
incorrect. Imagine you forgot to set the system time in one of your
cameras or reset the time accidentally. Or think of a bug in the camera
software that causes years to be wrong as happened in the cameras of a
major manufacturer at the turn of the year 2015/2016. Another situation
in which images times may need a little shift is when users wish to
synchronise the record times between camera pairs.</p>
<p>In any case, systematic offsets of date and time recorded by cameras
can be corrected easily. The function <code>timeShiftImages</code> does
just that by utilising the date/time shift module of ExifTool. All you
need is a table containing the time offset in a certain format, i.e.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">timeShiftTable</span><span class="op">)</span></span>
<span><span class="va">timeShiftTable</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station camera    timeshift sign</span></span>
<span><span class="co">## 1 StationA     NA  1:0:0 0:0:0    -</span></span>
<span><span class="co">## 2 StationB     NA 0:0:0 12:0:0    +</span></span></code></pre>
<p>There is a <code>station</code> column with station IDs,
<code>camera</code> is NA because there was 1 camera per station only in
our example, <code>timeshift</code> is the amount by which to shift the
time of all images at that station, and <code>sign</code> specifies the
direction in which to shift time. Setting <code>sign</code> to
<code>+</code> sets image time ahead by the amount specified in
<code>timeshift</code>, <code>-</code> sets image times back.
<code>timeshift</code> format is "year:month:day hour:minute:second",
i.e. "1:0:0 0:0:0" is a shift of exactly 1 year and "0:0:0 12:10:01" 12
hours and 10 minutes and 1 second. In the above table, time stampes of
images taken at StationA are shifted back by 1 year, and images taken at
StationB are shifted ahead by 12 hours.</p>
<p>The function <code>timeShiftImages</code> should be run directly
after saving the raw images on the hard disk.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># copy sample images to another location (so we don't mess around in the package directory)</span></span>
<span><span class="va">wd_images_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/raw_images"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">wd_images_raw</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span> , recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wd_images_raw_copy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>, <span class="st">"raw_images"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">timeshift_run</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/timeShiftImages.html">timeShiftImages</a></span><span class="op">(</span>inDir                <span class="op">=</span> <span class="va">wd_images_raw_copy</span>,</span>
<span>                                 timeShiftTable       <span class="op">=</span> <span class="va">timeShiftTable</span>,</span>
<span>                                 stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                 hasCameraFolders     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 timeShiftColumn      <span class="op">=</span> <span class="st">"timeshift"</span>,</span>
<span>                                 timeShiftSignColumn  <span class="op">=</span> <span class="st">"sign"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationA</span></span></code></pre>
<pre><code><span><span class="co">## C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationB</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timeshift_run</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                              directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationA</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationB</span></span>
<span><span class="co">##               n_directories                  n_images</span></span>
<span><span class="co">## 1     1 directories scanned     3 image files updated</span></span>
<span><span class="co">## 2     1 directories scanned     3 image files updated</span></span></code></pre>
<p>ExifTool has now updated the time tag of all images in the
directories specified in the <code>timeShiftTable</code>. The original
images are preserved as XYZ.JPG_original files (XYZ being the original
file name). By setting argument <code>undo = TRUE</code>, the orginals
are restored and the modified images are deleted. The function will
check if the number of JPG_original files and JPG files in folders is
identical. If not, the function will not work. It does not check for
consistency of file names.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timeshift_undo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/timeShiftImages.html">timeShiftImages</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_raw_copy</span>,</span>
<span>                                 timeShiftTable       <span class="op">=</span> <span class="va">timeShiftTable</span>,</span>
<span>                                 stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                 hasCameraFolders     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 timeShiftColumn      <span class="op">=</span> <span class="st">"timeshift"</span>,</span>
<span>                                 timeShiftSignColumn  <span class="op">=</span> <span class="st">"sign"</span>,</span>
<span>                                 undo                 <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">timeshift_undo</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                              directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationA</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images/StationB</span></span>
<span><span class="co">##   n_images_undo</span></span>
<span><span class="co">## 1             3</span></span>
<span><span class="co">## 2             3</span></span></code></pre>
<!--  ## Date/Time problems with Reconyx Hyperfire and Maginon cameras -->
</div>
<div class="section level3">
<h3 id="datetime-problems-with-reconyx-hyperfire-cameras">Date/Time problems with Reconyx Hyperfire cameras<a class="anchor" aria-label="anchor" href="#datetime-problems-with-reconyx-hyperfire-cameras"></a>
</h3>
<!--  ### Date/Time problems with Reconyx Hyperfire cameras -->
<p>Some Reconyx Hyperfire cameras (e.g. Hyperfire HC500) don’t store
date and time in the standard Exif format. Consequently, camtrapR cannot
read the DateTimeOriginal tag from these images. This can be fixed
easily by using the camtrapR function <code>fixDateTimeOriginal</code>
or by following the instructions given by Mathias Tobler in the
CameraBase documentation (page 7):</p>
<p><a href="http://www.atrium-biodiversity.org/tools/camerabase/files/CameraBaseDoc1.7.pdf" class="external-link uri">http://www.atrium-biodiversity.org/tools/camerabase/files/CameraBaseDoc1.7.pdf</a></p>
<!-- ### Date/Time problems with Maginon cameras -->
<!-- Camera trap model Maginon WK1 (and possibly also other models my this manufacturer) also don't store date and time in the standard Exif format, but in a different way compared to Reconyx HC500, hence the `fixDateTimeOriginal` doesn't work on these (currently).  -->
<!-- Maginon cameras don't create the DateTimeOriginal tag of the Exif metadata that camtrapR reads out. The best alternative available is the Exif Modify Date, which corresponds to the date and time in the images + 1 second. (DateTimeOriginal seems to be the shutter time and ModifyDate is the time the image was saved). To make things worse, there also seems to be some metadata problems in JPGs created by these cameras whch prevent exiftool from simply copying the relevant information into the right tag (technical note: exiftool gives an error about "bad format for EXIFIFD entry"). For more information see here: http://owl.phy.queensu.ca/~phil/exiftool/faq.html#Q20. -->
<!-- Currently, there is no camtrapR solution to fix this automatically, but here is a command line way to fix this. Please contace me if such a function in camtrapR would be relevant for you so I can add it. -->
<!-- The general workflow and exiftool commands are these. Adapt the file path to your directory structure (the "C:\Path\to\your\images" part). -->
<!-- **WARNING 1:** Make a backup of your data before doing this to prevent data loss! -->
<!-- **WARNING 2:** Only run this on directories that contain faulty images taken by Maginon cameras! Data loss may occur if these lines are run on healthy images! Also be aware of subfolders from  -->
<!-- 1. Fix the metadata problems -->
<!-- ```{r eval = FALSE} -->
<!-- exiftool -all= -tagsfromfile @ -all:all -unsafe -icc_profile "C:\Path\to\your\images" -->
<!-- ``` -->
<!-- 2. Create a DateTimeOriginal tag from the ModifyDate tag -->
<!-- ```{r eval = FALSE} -->
<!-- exiftool "-EXIF:DateTimeOriginal<EXIF:IFD0:ModifyDate" "C:\Path\to\your\images" -->
<!-- ``` -->
<!-- 3. If satisfied with the results, you can delete the original data which exiftool saved as ".JPG_original" files with the following line. Alternatively, delete them manually. -->
<!-- ```{r eval = FALSE} -->
<!-- exiftool -delete_original "C:\Path\to\your\images" -->
<!-- ``` -->
<!-- If you wish to run these command recursively, i.e. on all images contained in all subfolders of the specified directory, it can be achieved using the "-r" argument. The resulting commands are these: -->
<!-- ```{r eval = FALSE} -->
<!-- exiftool -all= -tagsfromfile @ -all:all -unsafe -icc_profile -r "C:\Path\to\your\images" -->
<!-- exiftool "-EXIF:DateTimeOriginal<EXIF:IFD0:ModifyDate" -r "C:\Path\to\your\images" -->
<!-- exiftool -delete_original -r "C:\Path\to\your\images" -->
<!-- ``` -->
</div>
<div class="section level3">
<h3 id="renaming-images">Renaming images<a class="anchor" aria-label="anchor" href="#renaming-images"></a>
</h3>
<p>Raw images are copied from the raw image directories into a new
location and renamed at the same time. The renamed file names follow
this pattern (depending on whether there was one or more cameras per
station):</p>
<blockquote>
<p>StationID__Date__Time(X).JPG</p>
</blockquote>
<blockquote>
<p>StationID__CameraID__Date__Time(X).JPG</p>
</blockquote>
<p>Station ID and camera ID are derived from the raw image directory
structure created earlier with <code>createStationFolders</code> Date
and time are taken from image Exif metadata (read using ExifTool). (X)
is a numeric identifier that is assigned to all images taken at the same
station (and camera, if applicable) within one minute. This is to avoid
identical image names if images were taken in the same second (or in the
same minute, if cameras record time in hours and minutes only).</p>
<p>Again, please be aware that temporary directories are used in the
example. Set <code>outDir</code> to a permanent directory. In addition,
images are not actually copied (argument
<code>copyImages = FALSE</code>), but copying and renaming is mererly
simulated in out example. So, in real world data, set
<code>copyImages = TRUE</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># raw image location</span></span>
<span><span class="va">wd_images_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/raw_images"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span>   </span>
<span> <span class="co"># destination for renamed images to be copied to</span></span>
<span><span class="va">wd_images_raw_renamed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>, <span class="st">"raw_images_renamed"</span><span class="op">)</span>       </span>
<span></span>
<span><span class="va">renaming.table2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/imageRename.html">imageRename</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_raw</span>,</span>
<span>                               outDir              <span class="op">=</span> <span class="va">wd_images_raw_renamed</span>,       </span>
<span>                               hasCameraFolders    <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                               copyImages          <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA:    3 images      |==========          |   50%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:    3 images      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># here is the information for a few images </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">renaming.table2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                                           Directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationA</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationA</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationA</span></span>
<span><span class="co">## 4 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationB</span></span>
<span><span class="co">## 5 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationB</span></span>
<span><span class="co">## 6 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/raw_images/StationB</span></span>
<span><span class="co">##      FileName  Station Camera    DateTimeOriginal DateReadable</span></span>
<span><span class="co">## 1 IMG0001.JPG StationA     NA 2009-04-10 05:07:00         TRUE</span></span>
<span><span class="co">## 2 IMG0002.JPG StationA     NA 2009-04-21 00:40:00         TRUE</span></span>
<span><span class="co">## 3 IMG0003.JPG StationA     NA 2009-04-22 20:19:00         TRUE</span></span>
<span><span class="co">## 4 IMG0001.JPG StationB     NA 2009-04-05 00:11:00         TRUE</span></span>
<span><span class="co">## 5 IMG0002.JPG StationB     NA 2009-04-05 23:13:00         TRUE</span></span>
<span><span class="co">## 6 IMG0003.JPG StationB     NA 2009-04-07 00:23:00         TRUE</span></span>
<span><span class="co">##                                                                         outDir</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationA</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationA</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationA</span></span>
<span><span class="co">## 4 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationB</span></span>
<span><span class="co">## 5 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationB</span></span>
<span><span class="co">## 6 C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/raw_images_renamed/StationB</span></span>
<span><span class="co">##                            filename_new fileExistsAlready CopyStatus</span></span>
<span><span class="co">## 1 StationA__2009-04-10__05-07-00(1).JPG             FALSE      FALSE</span></span>
<span><span class="co">## 2 StationA__2009-04-21__00-40-00(1).JPG             FALSE      FALSE</span></span>
<span><span class="co">## 3 StationA__2009-04-22__20-19-00(1).JPG             FALSE      FALSE</span></span>
<span><span class="co">## 4 StationB__2009-04-05__00-11-00(1).JPG             FALSE      FALSE</span></span>
<span><span class="co">## 5 StationB__2009-04-05__23-13-00(1).JPG             FALSE      FALSE</span></span>
<span><span class="co">## 6 StationB__2009-04-07__00-23-00(1).JPG             FALSE      FALSE</span></span></code></pre>
<p>So, the first image, "IMG0001.JPG" was renamed to
"StationA__2009-04-10__05-07-00(1).JPG". Here is what the columns
mean:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="89%">
</colgroup>
<thead><tr class="header">
<th>column</th>
<th>content</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Directory</code></td>
<td>the raw image directory</td>
</tr>
<tr class="even">
<td><code>FileName</code></td>
<td>raw image file name</td>
</tr>
<tr class="odd">
<td><code>Station</code></td>
<td>the station the image was taken at</td>
</tr>
<tr class="even">
<td><code>Camera</code></td>
<td>the camera ID (here NA because there were no camera subdirectories
)</td>
</tr>
<tr class="odd">
<td><code>DateTimeOriginal</code></td>
<td>Date and time in R-readable format</td>
</tr>
<tr class="even">
<td><code>DateReadable</code></td>
<td>whether the date could be read from the metadata or not (TRUE =
yes)</td>
</tr>
<tr class="odd">
<td><code>outDir</code></td>
<td>the directory the renamed image was copied to</td>
</tr>
<tr class="even">
<td><code>filename_new</code></td>
<td>the new file name</td>
</tr>
<tr class="odd">
<td><code>CopyStatus</code></td>
<td>whether the images was copied successfully (TRUE = yes)</td>
</tr>
</tbody>
</table>
<p>At this point you created a copy of your raw images and renamed them
with station ID, date and time.</p>
</div>
<div class="section level3">
<h3 id="writing-a-copyright-tag-into-image-metadata">Writing a copyright tag into image metadata<a class="anchor" aria-label="anchor" href="#writing-a-copyright-tag-into-image-metadata"></a>
</h3>
<p>The function <code>addCopyrightTag</code> can write a copyright tag
into image Exif metadata. While this can be useful when sharing or
publishing data, it is not required in the camtrapR workflow. The
function will recursively find all images in <code>inDir</code> and its
subdirectories and writes a user-defined text into the Copyright field
of the Exif metadata.</p>
<p>In doing so, Exiftool normally keeps the original images as
.JPG_original files. Note that this behaviour will instantly double the
number of images in inDir and the disk space required. If this is not
desired, users can set the function argument
<code>keepJPG_original = FALSE</code> (default is <code>TRUE</code>) in
order to replace the original files without creating *.JPG_original
files. I recommend to first try this on a copy of a subdataset and to
then check the function output. If there are warnings like "Warning:
[minor] Maker notes could not be parsed" image makernotes may be
unreadable afterwards (they are proprietary, undocumented formats). On
the other hand, you may never need these for analysing camera trapping
data.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># copy sample images to temporary directory (so we don't mess around in the package directory)</span></span>
<span><span class="va">wd_images_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">wd_images_ID</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wd_images_ID_copy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, winslash <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span>, <span class="st">"sample_images_species_dir"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define an example copyright tag</span></span>
<span><span class="va">copyrightTagToAdd</span> <span class="op">&lt;-</span> <span class="st">"Your Name (Your Organisation)"</span></span>
<span></span>
<span><span class="co"># write the tag to images</span></span>
<span><span class="fu"><a href="../reference/addCopyrightTag.html">addCopyrightTag</a></span><span class="op">(</span>inDir        <span class="op">=</span> <span class="va">wd_images_ID_copy</span>, </span>
<span>                copyrightTag <span class="op">=</span> <span class="va">copyrightTagToAdd</span>, </span>
<span>                askFirst     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>                  <span class="co"># askFirst = FALSE prevents function from asking user to confirm action (which doesn't work in vignettes)</span></span></code></pre></div>
<pre><code><span><span class="co">##    14 directories scanned    68 image files updated</span></span></code></pre>
<p>When we check the outcome with function exifTagNames, we find field
“Copyright” in line 27.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exiftagnames_extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/exifTagNames.html">exifTagNames</a></span><span class="op">(</span><span class="va">wd_images_ID_copy</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Metadata of:</span></span>
<span><span class="co">## C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/sample_images_species_dir/StationA/PBE/StationA__2009-04-21__00-40-00(1).JPG</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">exiftagnames_extracted</span>, row.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="8%">
<col width="19%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">tag_group</th>
<th align="left">tag_name</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">ExifTool</td>
<td align="left">ExifToolVersion</td>
<td align="left">12.49</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">ExifTool</td>
<td align="left">Warning</td>
<td align="left">Invalid EXIF text encoding for UserComment</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">File</td>
<td align="left">FileName</td>
<td align="left">StationA__2009-04-21__00-40-00(1).JPG</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">File</td>
<td align="left">Directory</td>
<td align="left">C:/Users/niedballa/AppData/Local/Temp/Rtmpw9ymYJ/sample_images_species_dir/StationA/PBE</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">File</td>
<td align="left">FileSize</td>
<td align="left">28 kB</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">File</td>
<td align="left">FileModifyDate</td>
<td align="left">2024:02:01 12:20:58+08:00</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="left">File</td>
<td align="left">FileAccessDate</td>
<td align="left">2024:02:01 12:20:58+08:00</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="left">File</td>
<td align="left">FileCreateDate</td>
<td align="left">2024:02:01 12:20:57+08:00</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">File</td>
<td align="left">FilePermissions</td>
<td align="left">-rw-rw-rw-</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="left">File</td>
<td align="left">FileType</td>
<td align="left">JPEG</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">File</td>
<td align="left">FileTypeExtension</td>
<td align="left">jpg</td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="left">File</td>
<td align="left">MIMEType</td>
<td align="left">image/jpeg</td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="left">File</td>
<td align="left">ExifByteOrder</td>
<td align="left">Little-endian (Intel, II)</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">File</td>
<td align="left">ImageWidth</td>
<td align="left">100</td>
</tr>
<tr class="odd">
<td align="left">15</td>
<td align="left">File</td>
<td align="left">ImageHeight</td>
<td align="left">75</td>
</tr>
<tr class="even">
<td align="left">16</td>
<td align="left">File</td>
<td align="left">EncodingProcess</td>
<td align="left">Baseline DCT, Huffman coding</td>
</tr>
<tr class="odd">
<td align="left">17</td>
<td align="left">File</td>
<td align="left">BitsPerSample</td>
<td align="left">8</td>
</tr>
<tr class="even">
<td align="left">18</td>
<td align="left">File</td>
<td align="left">ColorComponents</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">File</td>
<td align="left">YCbCrSubSampling</td>
<td align="left">YCbCr4:2:2 (2 1)</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">EXIF</td>
<td align="left">Make</td>
<td align="left">G4</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">EXIF</td>
<td align="left">Model</td>
<td align="left">CUDDEBACK</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">EXIF</td>
<td align="left">XResolution</td>
<td align="left">72</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">EXIF</td>
<td align="left">YResolution</td>
<td align="left">72</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">EXIF</td>
<td align="left">ResolutionUnit</td>
<td align="left">inches</td>
</tr>
<tr class="odd">
<td align="left">25</td>
<td align="left">EXIF</td>
<td align="left">ModifyDate</td>
<td align="left">2009:04:21 00:40:00</td>
</tr>
<tr class="even">
<td align="left">26</td>
<td align="left">EXIF</td>
<td align="left">YCbCrPositioning</td>
<td align="left">Co-sited</td>
</tr>
<tr class="odd">
<td align="left">27</td>
<td align="left">EXIF</td>
<td align="left">Copyright</td>
<td align="left">Your Name (Your Organisation)</td>
</tr>
<tr class="even">
<td align="left">28</td>
<td align="left">EXIF</td>
<td align="left">ExifVersion</td>
<td align="left">0200</td>
</tr>
<tr class="odd">
<td align="left">29</td>
<td align="left">EXIF</td>
<td align="left">DateTimeOriginal</td>
<td align="left">2009:04:21 00:40:00</td>
</tr>
<tr class="even">
<td align="left">30</td>
<td align="left">EXIF</td>
<td align="left">CreateDate</td>
<td align="left">2009:04:21 00:40:00</td>
</tr>
<tr class="odd">
<td align="left">31</td>
<td align="left">EXIF</td>
<td align="left">ComponentsConfiguration</td>
<td align="left">Y, Cb, Cr, -</td>
</tr>
<tr class="even">
<td align="left">32</td>
<td align="left">EXIF</td>
<td align="left">ShutterSpeedValue</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">33</td>
<td align="left">EXIF</td>
<td align="left">UserComment</td>
<td align="left">1 ATTEMPT G1H</td>
</tr>
<tr class="even">
<td align="left">34</td>
<td align="left">EXIF</td>
<td align="left">FlashpixVersion</td>
<td align="left">0100</td>
</tr>
<tr class="odd">
<td align="left">35</td>
<td align="left">EXIF</td>
<td align="left">ColorSpace</td>
<td align="left">sRGB</td>
</tr>
<tr class="even">
<td align="left">36</td>
<td align="left">EXIF</td>
<td align="left">ExifImageWidth</td>
<td align="left">100</td>
</tr>
<tr class="odd">
<td align="left">37</td>
<td align="left">EXIF</td>
<td align="left">ExifImageHeight</td>
<td align="left">75</td>
</tr>
<tr class="even">
<td align="left">38</td>
<td align="left">EXIF</td>
<td align="left">Compression</td>
<td align="left">JPEG (old-style)</td>
</tr>
<tr class="odd">
<td align="left">39</td>
<td align="left">EXIF</td>
<td align="left">ThumbnailOffset</td>
<td align="left">450</td>
</tr>
<tr class="even">
<td align="left">40</td>
<td align="left">EXIF</td>
<td align="left">ThumbnailLength</td>
<td align="left">25353</td>
</tr>
<tr class="odd">
<td align="left">41</td>
<td align="left">EXIF</td>
<td align="left">ThumbnailImage</td>
<td align="left">(Binary data 25353 bytes, use -b option to
extract)</td>
</tr>
<tr class="even">
<td align="left">42</td>
<td align="left">Composite</td>
<td align="left">ImageSize</td>
<td align="left">100x75</td>
</tr>
<tr class="odd">
<td align="left">43</td>
<td align="left">Composite</td>
<td align="left">Megapixels</td>
<td align="left">0.007</td>
</tr>
<tr class="even">
<td align="left">44</td>
<td align="left">Composite</td>
<td align="left">ShutterSpeed</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<p>The copyright tag will henceforth be visible in digiKam and other
image management software.</p>
<p>Now that the raw images are organised, the next step is species
identification, covered in the next vignette.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
