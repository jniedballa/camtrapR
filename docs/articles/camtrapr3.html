<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3. Data Extraction from Images and videos, creating occupancy &amp; secr input • camtrapR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3. Data Extraction from Images and videos, creating occupancy &amp; secr input">
<meta property="og:description" content="camtrapR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
    <li>
      <a href="../articles/camtrapr5.html">5. Multi-species occupancy models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jniedballa/camtrapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>3. Data Extraction from Images and videos,
creating occupancy &amp; secr input</h1>
                        <h4 data-toc-skip class="author">Juergen
Niedballa (<a href="mailto:camtrapr@gmail.com" class="email">camtrapr@gmail.com</a>)</h4>
            
            <h4 data-toc-skip class="date">2024-02-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jniedballa/camtrapR/blob/HEAD/vignettes/camtrapr3.Rmd" class="external-link"><code>vignettes/camtrapr3.Rmd</code></a></small>
      <div class="hidden name"><code>camtrapr3.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jniedballa/camtrapR" class="external-link">camtrapR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.otago.ac.nz/density/" class="external-link">secr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="tabulating-species-and-individual-records-the-recordtable-functions">Tabulating species and individual records: the recordTable
functions<a class="anchor" aria-label="anchor" href="#tabulating-species-and-individual-records-the-recordtable-functions"></a>
</h2>
<p>There are 2 function to tabulate species records after identification
of species from images and videos.</p>
<ul>
<li>
<code>recordTable</code> tabulates records of all images after
species-level identification and</li>
<li>
<code>recordTableIndividual</code> tabulates individuals of one
species.</li>
</ul>
<p>Nevertheless, the underlying idea is the same. For each image, the
date and time it was taken are read from the image’s Exif metadata using
ExifTool. Species or individual ID are read from the directory structure
or image metadata (see vignette “Species and Individual
Identification”). Video data are extracted analogously.</p>
<div class="section level3">
<h3 id="recordtable-tabulating-species-records">
<code>recordTable</code>: tabulating species records<a class="anchor" aria-label="anchor" href="#recordtable-tabulating-species-records"></a>
</h3>
<p><code>recordTable</code> is typically run after identifying species
from images. It reads species IDs from the directory structure the
images are placed in or from image metadata tags.</p>
<p>First we define the directory containing our renamed, identified
images</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find the directory with sample images contained in the package</span></span>
<span><span class="va">wd_images_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span>, lib.loc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>and see how many JPG images we have (this is not necessary, but
informative here).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">wd_images_ID</span>, pattern <span class="op">=</span> <span class="st">"JPG"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 68</span></span></code></pre>
<p>Now we can run <code>recordTable</code>. Here is a minimal
example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec.db.species0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTable.html">recordTable</a></span><span class="op">(</span>inDir  <span class="op">=</span> <span class="va">wd_images_ID</span>,</span>
<span>                               IDfrom <span class="op">=</span> <span class="st">"directory"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## timeZone is not specified. Assuming UTC</span></span></code></pre>
<pre><code><span><span class="co">## StationA:      8 images    0 duplicates removed      |=======             |   33%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:     23 images    6 duplicates removed      |=============       |   67%</span></span></code></pre>
<pre><code><span><span class="co">## StationC:     37 images    6 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rec.db.species0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station Species    DateTimeOriginal       Date     Time delta.time.secs</span></span>
<span><span class="co">## 1 StationA     PBE 2009-04-21 00:40:00 2009-04-21 00:40:00               0</span></span>
<span><span class="co">## 2 StationA     PBE 2009-04-22 20:19:00 2009-04-22 20:19:00          157140</span></span>
<span><span class="co">## 3 StationA     PBE 2009-04-22 20:21:00 2009-04-22 20:21:00             120</span></span>
<span><span class="co">## 4 StationA     PBE 2009-04-23 00:07:00 2009-04-23 00:07:00           13560</span></span>
<span><span class="co">## 5 StationA     PBE 2009-04-23 00:09:00 2009-04-23 00:09:00             120</span></span>
<span><span class="co">## 6 StationA     PBE 2009-05-07 17:11:00 2009-05-07 17:11:00         1270920</span></span>
<span><span class="co">##   delta.time.mins delta.time.hours delta.time.days</span></span>
<span><span class="co">## 1               0              0.0             0.0</span></span>
<span><span class="co">## 2            2619             43.6             1.8</span></span>
<span><span class="co">## 3               2              0.0             0.0</span></span>
<span><span class="co">## 4             226              3.8             0.2</span></span>
<span><span class="co">## 5               2              0.0             0.0</span></span>
<span><span class="co">## 6           21182            353.0            14.7</span></span>
<span><span class="co">##                                                                                                              Directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 4 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 5 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 6 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">##                                FileName n_images</span></span>
<span><span class="co">## 1 StationA__2009-04-21__00-40-00(1).JPG        1</span></span>
<span><span class="co">## 2 StationA__2009-04-22__20-19-00(1).JPG        1</span></span>
<span><span class="co">## 3 StationA__2009-04-22__20-21-00(1).JPG        1</span></span>
<span><span class="co">## 4 StationA__2009-04-23__00-07-00(1).JPG        1</span></span>
<span><span class="co">## 5 StationA__2009-04-23__00-09-00(1).JPG        1</span></span>
<span><span class="co">## 6 StationA__2009-05-07__17-11-00(1).JPG        1</span></span></code></pre>
<p>Argument <code>IDfrom</code> tells the function to look for species
directories within the station directories and to take species IDs from
these. <code>IDfrom</code> must be set to “metadata” if metadata tagging
was used for species identification.</p>
<p>By default, the function returns all records. Nevertheless, we get a
data frame containing 56 records, less than the number of images in the
image directory (68). This is because a number of images were taken at
the same time (measured with 1 minute precision by these cameras) and
the function removes duplicate records.</p>
<p>It may suffice to illustrate this with the Pig-tailed macaque images
from stationB:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd_images_ID</span>, <span class="st">"StationB"</span>, <span class="st">"MNE"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "StationB__2009-04-15__07-21-00(1).JPG"</span></span>
<span><span class="co">##  [2] "StationB__2009-04-15__07-23-00(1).JPG"</span></span>
<span><span class="co">##  [3] "StationB__2009-04-28__17-47-00(1).JPG"</span></span>
<span><span class="co">##  [4] "StationB__2009-04-28__17-47-00(2).JPG"</span></span>
<span><span class="co">##  [5] "StationB__2009-04-28__17-48-00(1).JPG"</span></span>
<span><span class="co">##  [6] "StationB__2009-04-28__17-48-00(2).JPG"</span></span>
<span><span class="co">##  [7] "StationB__2009-04-28__17-48-00(3).JPG"</span></span>
<span><span class="co">##  [8] "StationB__2009-04-28__17-49-00(1).JPG"</span></span>
<span><span class="co">##  [9] "StationB__2009-04-28__17-49-00(2).JPG"</span></span>
<span><span class="co">## [10] "StationB__2009-04-28__17-49-00(3).JPG"</span></span></code></pre>
<p>There are, amongst others, 3 images taken at 17:48:00 on the 28th of
April 2009. Of these, only 1 will be returned.</p>
<p>Here is what the columns of the record table contain:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="89%">
</colgroup>
<thead><tr class="header">
<th>column</th>
<th>content</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Station</code></td>
<td>the station the image is from</td>
</tr>
<tr class="even">
<td><code>Species</code></td>
<td>species name</td>
</tr>
<tr class="odd">
<td><code>DateTimeOriginal</code></td>
<td>Date and time of record in R-readable format</td>
</tr>
<tr class="even">
<td><code>Date</code></td>
<td>record date</td>
</tr>
<tr class="odd">
<td><code>Time</code></td>
<td>record time of day</td>
</tr>
<tr class="even">
<td><code>delta.time.secs</code></td>
<td>time difference between record and last (independent) record of same
species at same station / camera* (in seconds)</td>
</tr>
<tr class="odd">
<td><code>delta.time.mins</code></td>
<td>time difference between record and last (independent) record of same
species at same station / camera* (in minutes)</td>
</tr>
<tr class="even">
<td><code>delta.time.hours</code></td>
<td>time difference between record and last (independent) record of same
species at same station / camera* (in hours)</td>
</tr>
<tr class="odd">
<td><code>delta.time.days</code></td>
<td>time difference between record and last (independent) record of same
species at same station / camera* (in days)</td>
</tr>
<tr class="even">
<td><code>Directory</code></td>
<td>directory the image is in</td>
</tr>
<tr class="odd">
<td><code>FileName</code></td>
<td>image file name</td>
</tr>
</tbody>
</table>
<p>*see below: Independence between cameras within stations</p>
<div class="section level4">
<h4 id="temporal-independence-between-records">Temporal independence between records<a class="anchor" aria-label="anchor" href="#temporal-independence-between-records"></a>
</h4>
<p>Imagine a species that loves to hang out in front of your cameras.
You will end up with hundreds of shots of the same species, maybe even
the same animal. Therefore, images can be filtered using an adjustable
criterion for temporal independence between subsequent records of the
same species in an attempt to remove non-independent records. This is
achieved via argument <code>minDeltaTime</code>. It is the minimum time
difference (in minutes) between two records of the same species at the
same station which are to be considered independent. The default is 0,
causing the function to return all records. Setting it to a higher
number, e.g. 60 (i.e., 1 hour), is commonly done to thin the number of
records. Note that you will not lose records of different species, even
if they fall within the specified time interval from a record.</p>
<p>The argument <code>deltaTimeComparedTo</code> further controls how
independence between records is assessed. Setting it to “lastRecord”
returns only records taken <code>minDeltaTime</code> minutes after the
last record. Setting it to “lastIndependentRecord” returns only records
taken <code>minDeltaTime</code> minutes after the last
<em>independent</em> record.</p>
<p>Let’s now apply an 1-hour independence criterion and define a time
zone.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec.db.species60</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTable.html">recordTable</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID</span>,</span>
<span>                                IDfrom              <span class="op">=</span> <span class="st">"directory"</span>,</span>
<span>                                minDeltaTime        <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                                deltaTimeComparedTo <span class="op">=</span> <span class="st">"lastRecord"</span>,</span>
<span>                                timeZone            <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA:      8 images    0 duplicates removed      |=======             |   33%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:     23 images    6 duplicates removed      |=============       |   67%</span></span></code></pre>
<pre><code><span><span class="co">## StationC:     37 images    6 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">rec.db.species60</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 40</span></span></code></pre>
<p>Now 40 records were returned instead of 56. The missing records were
taken less than 1 hour after the prior record of the same species at the
same station and therefore omitted.</p>
</div>
<div class="section level4">
<h4 id="time-zones-and-daylight-saving-time">Time zones and daylight saving time<a class="anchor" aria-label="anchor" href="#time-zones-and-daylight-saving-time"></a>
</h4>
<p>Note the warning about the missing time zone in the minimal example
above. By default, camtrapR will assume UTC time zone. This should work
well in most situations (even though the time zone may not be correct,
strictly speaking), because UTC does not use daylight saving time (DST,
aka ‘summer time’), and camera traps normally don’t use time zones
(hence, camera traps will normally not respect DST of the area you work
in and will not adjust image timestamps accordingly).</p>
<p>Now, if you work in an area that uses DST, and your camera does not
know about DST, things can go wrong in various ways and you may end up
with a systematic 1-hour offset. If you set your cameras up during DST
(in summer) and set the internal clock accordingly, all records taken in
winter (non-DST period) will be recorded as 1 hour later than according
to actual clock time. If you set your cameras up during winter (not DST)
and set the internal clock accordingly, all records taken in summer (DST
period) will be recorded as 1 hour earlier than according to actual
clock time.</p>
<p>In addition if you specify a time zone with DST and your cameras
don’t respect it, records may fall into the non-existing hour when
clocks are advanced in spring, leading to an error in interpreting the
date/time.</p>
<p>So, the question whether or not your cameras record the time zone
becomes very important. Here is some recommendations on how to use the
argument <code>timeZone</code>.</p>
<p>If your cameras don’t save the time zone, and your time zone does not
have DST, set argument <code>timeZone</code> to your study area time
zone If your cameras don’t save the time zone, and your time zone has
DST, leave argument <code>timeZone</code> at the default UTC. If your
cameras save the time zone and adjust image timestamps accordingly, set
argument <code>timeZone</code> to your study area time zone (both if
your area has DST or not).</p>
<p>In other words, it is advised to set argument <code>timeZone</code>
to your study area’s time zone (one of <code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">OlsonNames()</a></code>),
<em>unless</em> the time zone of your study area has DST, but your
cameras don’t record it.</p>
</div>
<div class="section level4">
<h4 id="independence-between-cameras-within-stations">Independence between cameras within stations<a class="anchor" aria-label="anchor" href="#independence-between-cameras-within-stations"></a>
</h4>
<p>The issue of temporal independence between records becomes slightly
more complex if more than one camera was operated at stations. That
information can and should be included in the output of
<code>recordTable</code> (and <code>recordTableIndividual</code>). Users
can then decide whether temporal independence is to be assessed within
stations or within cameras at each station. In the first case, argument
<code>camerasIndependent</code> must be set to FALSE. 2 images taken at
different 2 cameras at the same station within <code>minDeltaTime</code>
minutes will be reported as 1 record in the record table (suitable if
cameras were places in pairs). In the second case
<code>camerasIndependent</code> must be set to TRUE and 2 images taken
at different 2 cameras at the same station within
<code>minDeltaTime</code> minutes will be reported as 2 record in the
record table (suitable e.g., if cameras were located at some distance to
one another and faced different trails).</p>
<p>The <code>cameraID</code> argument controls where camtrapR will look
for camera IDs: in the file names (after renaming using
<code>imageRename</code>,
e.g. “renamedImages/StationA/StationA__<strong>Camera1</strong>__2015-12-31__23-59-59(1).JPG”)
or in the directory structure
(e.g. renamedImages/StationA/<strong>Camera1</strong>/StationA__Camera1__2015-12-31__23-59-59(1).JPG”).
If missing, it will be assumed there was only 1 camera per station.</p>
</div>
<div class="section level4">
<h4 id="ignoring-species">Ignoring species<a class="anchor" aria-label="anchor" href="#ignoring-species"></a>
</h4>
<p>Argument <code>exclude</code> can be used to ignore certain species.
This is useful for omitting images in directories like “team” or
“unidentified”. Here is an example:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># see what species  we recorded</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rec.db.species60</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  EGY  MNE  PBE  TRA UNID  VTA </span></span>
<span><span class="co">##    6    2   18    8    1    5</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove "UNID" by setting argument exclude = "UNID"</span></span>
<span><span class="va">rec.db.species60.exclude</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTable.html">recordTable</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID</span>,</span>
<span>                                        IDfrom              <span class="op">=</span> <span class="st">"directory"</span>,</span>
<span>                                        minDeltaTime        <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                                        deltaTimeComparedTo <span class="op">=</span> <span class="st">"lastIndependentRecord"</span>,</span>
<span>                                        timeZone            <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span>
<span>                                        exclude             <span class="op">=</span> <span class="st">"UNID"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA:      8 images    0 duplicates removed      |=======             |   33%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:     22 images    6 duplicates removed      |=============       |   67%</span></span></code></pre>
<pre><code><span><span class="co">## StationC:     37 images    6 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note that "UNID" is gone now</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">rec.db.species60.exclude</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## EGY MNE PBE TRA VTA </span></span>
<span><span class="co">##   6   2  18   8   5</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="extracting-image-metadata">Extracting image metadata<a class="anchor" aria-label="anchor" href="#extracting-image-metadata"></a>
</h4>
<p><code>recordTable</code> and <code>recordTableIndividual</code> can
both extract additional metadata from images (apart from date and time).
For example, some camera models record ambient temperature or moon
phase, which may be of interest. Metadata tags are stored in the images
at the time they are taken and can be accessed and extracted if their
tag names are known. Some tag names are standardised
(e.g. “DateTimeOriginal”) while others are manufacturer-specific.
Therefore, function <code>exifTagNames</code> returns all Exif metadata
it finds in a sample image. Users can then choose which to extract with
<code>recordTable</code> and <code>recordTableIndividual</code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wd_images_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/exifTagNames.html">exifTagNames</a></span><span class="op">(</span>inDir <span class="op">=</span> <span class="va">wd_images_ID</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Metadata of:</span></span>
<span><span class="co">## C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE/StationA__2009-04-21__00-40-00(1).JPG</span></span></code></pre>
<pre><code><span><span class="co">##    tag_group                tag_name</span></span>
<span><span class="co">## 1   ExifTool         ExifToolVersion</span></span>
<span><span class="co">## 2   ExifTool                 Warning</span></span>
<span><span class="co">## 3       File                FileName</span></span>
<span><span class="co">## 4       File               Directory</span></span>
<span><span class="co">## 5       File                FileSize</span></span>
<span><span class="co">## 6       File          FileModifyDate</span></span>
<span><span class="co">## 7       File          FileAccessDate</span></span>
<span><span class="co">## 8       File          FileCreateDate</span></span>
<span><span class="co">## 9       File         FilePermissions</span></span>
<span><span class="co">## 10      File                FileType</span></span>
<span><span class="co">## 11      File       FileTypeExtension</span></span>
<span><span class="co">## 12      File                MIMEType</span></span>
<span><span class="co">## 13      File           ExifByteOrder</span></span>
<span><span class="co">## 14      File              ImageWidth</span></span>
<span><span class="co">## 15      File             ImageHeight</span></span>
<span><span class="co">## 16      File         EncodingProcess</span></span>
<span><span class="co">## 17      File           BitsPerSample</span></span>
<span><span class="co">## 18      File         ColorComponents</span></span>
<span><span class="co">## 19      File        YCbCrSubSampling</span></span>
<span><span class="co">## 20      EXIF                    Make</span></span>
<span><span class="co">## 21      EXIF                   Model</span></span>
<span><span class="co">## 22      EXIF             XResolution</span></span>
<span><span class="co">## 23      EXIF             YResolution</span></span>
<span><span class="co">## 24      EXIF              ModifyDate</span></span>
<span><span class="co">## 25      EXIF          ResolutionUnit</span></span>
<span><span class="co">## 26      EXIF        YCbCrPositioning</span></span>
<span><span class="co">## 27      EXIF             ExifVersion</span></span>
<span><span class="co">## 28      EXIF ComponentsConfiguration</span></span>
<span><span class="co">## 29      EXIF         FlashpixVersion</span></span>
<span><span class="co">## 30      EXIF              ColorSpace</span></span>
<span><span class="co">## 31      EXIF          ExifImageWidth</span></span>
<span><span class="co">## 32      EXIF         ExifImageHeight</span></span>
<span><span class="co">## 33      EXIF        DateTimeOriginal</span></span>
<span><span class="co">## 34      EXIF              CreateDate</span></span>
<span><span class="co">## 35      EXIF             UserComment</span></span>
<span><span class="co">## 36      EXIF       ShutterSpeedValue</span></span>
<span><span class="co">## 37      EXIF             Compression</span></span>
<span><span class="co">## 38      EXIF         ThumbnailOffset</span></span>
<span><span class="co">## 39      EXIF         ThumbnailLength</span></span>
<span><span class="co">## 40      EXIF          ThumbnailImage</span></span>
<span><span class="co">## 41 Composite               ImageSize</span></span>
<span><span class="co">## 42 Composite              Megapixels</span></span>
<span><span class="co">## 43 Composite            ShutterSpeed</span></span>
<span><span class="co">##                                                                                                                   value</span></span>
<span><span class="co">## 1                                                                                                                 12.49</span></span>
<span><span class="co">## 2                                                                            Invalid EXIF text encoding for UserComment</span></span>
<span><span class="co">## 3                                                                                 StationA__2009-04-21__00-40-00(1).JPG</span></span>
<span><span class="co">## 4  C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 5                                                                                                                 28 kB</span></span>
<span><span class="co">## 6                                                                                             2023:11:19 17:22:08+08:00</span></span>
<span><span class="co">## 7                                                                                             2023:11:19 17:22:08+08:00</span></span>
<span><span class="co">## 8                                                                                             2023:11:19 17:22:08+08:00</span></span>
<span><span class="co">## 9                                                                                                            -rw-rw-rw-</span></span>
<span><span class="co">## 10                                                                                                                 JPEG</span></span>
<span><span class="co">## 11                                                                                                                  jpg</span></span>
<span><span class="co">## 12                                                                                                           image/jpeg</span></span>
<span><span class="co">## 13                                                                                            Little-endian (Intel, II)</span></span>
<span><span class="co">## 14                                                                                                                  100</span></span>
<span><span class="co">## 15                                                                                                                   75</span></span>
<span><span class="co">## 16                                                                                         Baseline DCT, Huffman coding</span></span>
<span><span class="co">## 17                                                                                                                    8</span></span>
<span><span class="co">## 18                                                                                                                    3</span></span>
<span><span class="co">## 19                                                                                                     YCbCr4:2:2 (2 1)</span></span>
<span><span class="co">## 20                                                                                                                   G4</span></span>
<span><span class="co">## 21                                                                                                            CUDDEBACK</span></span>
<span><span class="co">## 22                                                                                                                   72</span></span>
<span><span class="co">## 23                                                                                                                   72</span></span>
<span><span class="co">## 24                                                                                                  2009:04:21 00:40:00</span></span>
<span><span class="co">## 25                                                                                                               inches</span></span>
<span><span class="co">## 26                                                                                                             Co-sited</span></span>
<span><span class="co">## 27                                                                                                                 0200</span></span>
<span><span class="co">## 28                                                                                                         Y, Cb, Cr, -</span></span>
<span><span class="co">## 29                                                                                                                 0100</span></span>
<span><span class="co">## 30                                                                                                                 sRGB</span></span>
<span><span class="co">## 31                                                                                                                  100</span></span>
<span><span class="co">## 32                                                                                                                   75</span></span>
<span><span class="co">## 33                                                                                                  2009:04:21 00:40:00</span></span>
<span><span class="co">## 34                                                                                                  2009:04:21 00:40:00</span></span>
<span><span class="co">## 35                                                                                                        1 ATTEMPT G1H</span></span>
<span><span class="co">## 36                                                                                                                    1</span></span>
<span><span class="co">## 37                                                                                                     JPEG (old-style)</span></span>
<span><span class="co">## 38                                                                                                                  408</span></span>
<span><span class="co">## 39                                                                                                                25353</span></span>
<span><span class="co">## 40                                                                  (Binary data 25353 bytes, use -b option to extract)</span></span>
<span><span class="co">## 41                                                                                                               100x75</span></span>
<span><span class="co">## 42                                                                                                                0.007</span></span>
<span><span class="co">## 43                                                                                                                    1</span></span></code></pre>
<p>The output table contains tag groups, tag descriptions, tag names and
tag values. The values in <code>tag_group</code> help to unambiguously
identify specific metadata tags.</p>
<p>Use the entries in <code>tag_name</code> (not
<code>tag_description</code>) when providing values to the argument
<code>additionalMetadataTags</code> in the<code>recordTable</code>
functions.</p>
<p>Of the tags shown here, “DateTimeOriginal” contains the date and time
that camtrapR reads out. Apart from that, there is little information of
ecological interest in the example data. However, for demonstration
purposes, let’s extract information about the camera model and make. To
be as precise as possible, we provide tags in the format:
tag_group:tag_name (e.g. EXIF:Model)</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec.db.species.metadata1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTable.html">recordTable</a></span><span class="op">(</span>inDir                  <span class="op">=</span> <span class="va">wd_images_ID</span>,</span>
<span>                                        IDfrom                 <span class="op">=</span> <span class="st">"directory"</span>,</span>
<span>                                        timeZone               <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span>
<span>                                        additionalMetadataTags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXIF:Model"</span>, <span class="st">"EXIF:Make"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA:      8 images    0 duplicates removed      |=======             |   33%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:     23 images    6 duplicates removed      |=============       |   67%</span></span></code></pre>
<pre><code><span><span class="co">## StationC:     37 images    6 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rec.db.species.metadata1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station Species    DateTimeOriginal       Date     Time delta.time.secs</span></span>
<span><span class="co">## 1 StationA     PBE 2009-04-21 00:40:00 2009-04-21 00:40:00               0</span></span>
<span><span class="co">## 2 StationA     PBE 2009-04-22 20:19:00 2009-04-22 20:19:00          157140</span></span>
<span><span class="co">## 3 StationA     PBE 2009-04-22 20:21:00 2009-04-22 20:21:00             120</span></span>
<span><span class="co">## 4 StationA     PBE 2009-04-23 00:07:00 2009-04-23 00:07:00           13560</span></span>
<span><span class="co">## 5 StationA     PBE 2009-04-23 00:09:00 2009-04-23 00:09:00             120</span></span>
<span><span class="co">## 6 StationA     PBE 2009-05-07 17:11:00 2009-05-07 17:11:00         1270920</span></span>
<span><span class="co">##   delta.time.mins delta.time.hours delta.time.days</span></span>
<span><span class="co">## 1               0              0.0             0.0</span></span>
<span><span class="co">## 2            2619             43.6             1.8</span></span>
<span><span class="co">## 3               2              0.0             0.0</span></span>
<span><span class="co">## 4             226              3.8             0.2</span></span>
<span><span class="co">## 5               2              0.0             0.0</span></span>
<span><span class="co">## 6           21182            353.0            14.7</span></span>
<span><span class="co">##                                                                                                              Directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 4 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 5 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">## 6 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_species_dir/StationA/PBE</span></span>
<span><span class="co">##                                FileName EXIF.Model EXIF.Make n_images</span></span>
<span><span class="co">## 1 StationA__2009-04-21__00-40-00(1).JPG  CUDDEBACK        G4        1</span></span>
<span><span class="co">## 2 StationA__2009-04-22__20-19-00(1).JPG  CUDDEBACK        G4        1</span></span>
<span><span class="co">## 3 StationA__2009-04-22__20-21-00(1).JPG  CUDDEBACK        G4        1</span></span>
<span><span class="co">## 4 StationA__2009-04-23__00-07-00(1).JPG  CUDDEBACK        G4        1</span></span>
<span><span class="co">## 5 StationA__2009-04-23__00-09-00(1).JPG  CUDDEBACK        G4        1</span></span>
<span><span class="co">## 6 StationA__2009-05-07__17-11-00(1).JPG  CUDDEBACK        G4        1</span></span></code></pre>
<p>There are 2 additional columns containing the information from the
metadata we requested.</p>
</div>
</div>
<div class="section level3">
<h3 id="recordtableindividual-tabulating-individuals-of-a-species">
<code>recordTableIndividual</code>: tabulating individuals of a
species<a class="anchor" aria-label="anchor" href="#recordtableindividual-tabulating-individuals-of-a-species"></a>
</h3>
<p>Individual identification of species is a prerequiste for running
(spatial) capture-recapture models. <code>recordTableIndividual</code>
and the subsequent <code>spatialDetectionHistory</code> function prepare
data for these models.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find the directory with tagged sample images contained in the package</span></span>
<span><span class="va">wd_images_individual_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_indiv_tag/LeopardCat"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span>
<span> <span class="co"># missing space in species = "LeopardCat" is because of CRAN package policies</span></span>
<span></span>
<span> <span class="va">rec.db.pbe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTableIndividual.html">recordTableIndividual</a></span><span class="op">(</span>inDir                  <span class="op">=</span> <span class="va">wd_images_individual_ID</span>,</span>
<span>                                     IDfrom                 <span class="op">=</span> <span class="st">"metadata"</span>,</span>
<span>                                     minDeltaTime           <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                                     deltaTimeComparedTo    <span class="op">=</span> <span class="st">"lastIndependentRecord"</span>,</span>
<span>                                     hasStationFolders      <span class="op">=</span> <span class="cn">FALSE</span>,         <span class="co"># images are not in station directories</span></span>
<span>                                     metadataIDTag          <span class="op">=</span> <span class="st">"individual"</span>,  <span class="co"># the name of the metadata tag containing individual IDs</span></span>
<span>                                     timeZone               <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span>
<span> <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA, StationB, StationC:     26 images    3 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="section level4">
<h4 id="extracting-custom-image-metadata">Extracting custom image metadata<a class="anchor" aria-label="anchor" href="#extracting-custom-image-metadata"></a>
</h4>
<p>In addition to the metadata that were saved when the image was taken
(see above), custom metadata tags assigned in image management software
can also be extracted. These may contain species ID tags if species were
identified using metadata tags (instead of moving images into species
directories), but also individual IDs, animal counts, sex of animals
recorded, etc..</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rec.db.pbe</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station    Species Individual    DateTimeOriginal       Date     Time</span></span>
<span><span class="co">## 1 StationA LeopardCat          1 2009-05-07 17:11:00 2009-05-07 17:11:00</span></span>
<span><span class="co">## 2 StationA LeopardCat          2 2009-04-21 00:40:00 2009-04-21 00:40:00</span></span>
<span><span class="co">## 3 StationA LeopardCat          2 2009-04-22 20:19:00 2009-04-22 20:19:00</span></span>
<span><span class="co">## 4 StationA LeopardCat          2 2009-04-23 00:07:00 2009-04-23 00:07:00</span></span>
<span><span class="co">## 5 StationB LeopardCat          1 2009-04-07 00:23:00 2009-04-07 00:23:00</span></span>
<span><span class="co">## 6 StationB LeopardCat          1 2009-04-14 06:13:00 2009-04-14 06:13:00</span></span>
<span><span class="co">##   delta.time.secs delta.time.mins delta.time.hours delta.time.days</span></span>
<span><span class="co">## 1               0               0              0.0             0.0</span></span>
<span><span class="co">## 2               0               0              0.0             0.0</span></span>
<span><span class="co">## 3          157140            2619             43.6             1.8</span></span>
<span><span class="co">## 4           13680             228              3.8             0.2</span></span>
<span><span class="co">## 5               0               0              0.0             0.0</span></span>
<span><span class="co">## 6          625800           10430            173.8             7.2</span></span>
<span><span class="co">##                                                                                                          Directory</span></span>
<span><span class="co">## 1 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">## 2 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">## 3 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">## 4 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">## 5 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">## 6 C:/Users/niedballa/AppData/Local/Programs/R/R-4.3.2/library/camtrapR/pictures/sample_images_indiv_tag/LeopardCat</span></span>
<span><span class="co">##                                FileName metadata_Species metadata_individual</span></span>
<span><span class="co">## 1 StationA__2009-05-07__17-11-00(1).JPG      Leopard Cat                   1</span></span>
<span><span class="co">## 2 StationA__2009-04-21__00-40-00(1).JPG      Leopard Cat                   2</span></span>
<span><span class="co">## 3 StationA__2009-04-22__20-19-00(1).JPG      Leopard Cat                   2</span></span>
<span><span class="co">## 4 StationA__2009-04-23__00-07-00(1).JPG      Leopard Cat                   2</span></span>
<span><span class="co">## 5 StationB__2009-04-07__00-23-00(1).JPG      Leopard Cat                   1</span></span>
<span><span class="co">## 6 StationB__2009-04-14__06-13-00(1).JPG      Leopard Cat                   1</span></span>
<span><span class="co">##   n_images               HierarchicalSubject</span></span>
<span><span class="co">## 1        1 Species|Leopard Cat, individual|1</span></span>
<span><span class="co">## 2        1 Species|Leopard Cat, individual|2</span></span>
<span><span class="co">## 3        2 Species|Leopard Cat, individual|2</span></span>
<span><span class="co">## 4        2 Species|Leopard Cat, individual|2</span></span>
<span><span class="co">## 5        1 Species|Leopard Cat, individual|1</span></span>
<span><span class="co">## 6        1 Species|Leopard Cat, individual|1</span></span></code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="camera-operation">Camera Operation<a class="anchor" aria-label="anchor" href="#camera-operation"></a>
</h2>
<p>The camera operation matrix is a day-by-station matrix that states
how many cameras were active at a station on a given day. Rows represent
stations and columns days, beginning with the day the first camera was
set up and ending the day the last camera was retrieved. It is
calculated from the camera trap table mention in vignette 1 (see
?camtraps for an example). Users can give the setup / retrieval /
problem columns in the input table as dates or date-times (since version
2.1.0).</p>
<p><em>Important:</em> Prior to version 2.1.0, the values were integer
numbers, with 1 indicating the camera was active on a day (or possibly
higher values if multiple cameras at a station are combined).</p>
<p>From version 2.1.0, the values are the fraction of the day a camera
was active. If only dates are provided in the camera trap table, the
function will assume 12 noon as setup/retrieval time Problem periods
will be assumed to last the entire day.</p>
<p>If imput is provided as date-times, output will be the exact fraction
of day a station or camera was active (taking into account setup /
retrieval time as well as time of Problem periods).</p>
<div class="section level3">
<h3 id="dates-as-input">Dates as input<a class="anchor" aria-label="anchor" href="#dates-as-input"></a>
</h3>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="co"># first load the camera trap station table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtraps</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dateFormat</span> <span class="op">&lt;-</span> <span class="st">"dmy"</span>    <span class="co"># requires lubridate package</span></span>
<span><span class="co"># alternatively, use "%d/%m/%Y" (from base R)</span></span>
<span> </span>
<span><span class="va">camop_problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps</span>,</span>
<span>                                 stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                 setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                 retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                 writecsv     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                 dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># as a reminder, these are the dates in our station information table</span></span>
<span><span class="va">camtraps</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">camtraps</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"utm_y"</span>, <span class="st">"utm_x"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station Setup_date Retrieval_date Problem1_from Problem1_to</span></span>
<span><span class="co">## 1 StationA 02/04/2009     14/05/2009                          </span></span>
<span><span class="co">## 2 StationB 03/04/2009     16/05/2009                          </span></span>
<span><span class="co">## 3 StationC 04/04/2009     17/05/2009    12/05/2009  17/05/2009</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># now let's have a look at the first few columns of the camera operation matrix</span></span>
<span><span class="va">camop_problem</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-04-02 2009-04-03 2009-04-04 2009-04-05 2009-04-06</span></span>
<span><span class="co">## StationA        0.5        1.0        1.0          1          1</span></span>
<span><span class="co">## StationB         NA        0.5        1.0          1          1</span></span>
<span><span class="co">## StationC         NA         NA        0.5          1          1</span></span></code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and the last few</span></span>
<span><span class="va">camop_problem</span><span class="op">[</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_problem</span><span class="op">)</span><span class="op">-</span><span class="fl">6</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_problem</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-05-11 2009-05-12 2009-05-13 2009-05-14 2009-05-15 2009-05-16</span></span>
<span><span class="co">## StationA          1          1          1        0.5         NA         NA</span></span>
<span><span class="co">## StationB          1          1          1        1.0          1        0.5</span></span>
<span><span class="co">## StationC          1          0          0        0.0          0        0.0</span></span>
<span><span class="co">##          2009-05-17</span></span>
<span><span class="co">## StationA         NA</span></span>
<span><span class="co">## StationB         NA</span></span>
<span><span class="co">## StationC          0</span></span></code></pre>
<p>If stations were not set up, values are NA. Operational stations get
value 1. If cameras were set up but malfunctioning, it is 0 (if
hasProblems = TRUE).</p>
</div>
<div class="section level3">
<h3 id="date-times-as-input">Date-times as input<a class="anchor" aria-label="anchor" href="#date-times-as-input"></a>
</h3>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camtraps_hrs</span> <span class="op">&lt;-</span> <span class="va">camtraps</span></span>
<span></span>
<span><span class="co"># assign hours for setup and retrieval</span></span>
<span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Setup_date</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Setup_date</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"12"</span>, <span class="st">"15"</span>, <span class="st">"18"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Retrieval_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Retrieval_date</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"18"</span>, <span class="st">"15"</span>, <span class="st">"12"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assign a random hours for begin of Problem at station 3</span></span>
<span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Problem1_from</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Problem1_from</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, <span class="st">"20"</span><span class="op">)</span></span>
<span><span class="co"># Problem ends with retrieval (i.e., malfunction until camera retrieved)</span></span>
<span><span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Problem1_to</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>  <span class="op">&lt;-</span> <span class="va">camtraps_hrs</span><span class="op">$</span><span class="va">Retrieval_date</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># create camera operation matrix</span></span>
<span><span class="va">camop_hours</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable <span class="op">=</span> <span class="va">camtraps_hrs</span>,</span>
<span>                                         stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                         setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                         retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                         hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                         dateFormat   <span class="op">=</span> <span class="st">"dmy H"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># as a reminder, these are the date-times in our station information table</span></span>
<span><span class="va">camtraps_hrs</span></span></code></pre></div>
<pre><code><span><span class="co">##    Station  utm_y  utm_x    Setup_date Retrieval_date Problem1_from</span></span>
<span><span class="co">## 1 StationA 604000 526000 02/04/2009 12  14/05/2009 18              </span></span>
<span><span class="co">## 2 StationB 606000 523000 03/04/2009 15  16/05/2009 15              </span></span>
<span><span class="co">## 3 StationC 607050 525000 04/04/2009 18  17/05/2009 12 12/05/2009 20</span></span>
<span><span class="co">##     Problem1_to</span></span>
<span><span class="co">## 1              </span></span>
<span><span class="co">## 2              </span></span>
<span><span class="co">## 3 17/05/2009 12</span></span></code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># now let's have a look at the first few columns of the camera operation matrix</span></span>
<span><span class="va">camop_hours</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-04-02 2009-04-03 2009-04-04 2009-04-05 2009-04-06</span></span>
<span><span class="co">## StationA        0.5      1.000       1.00          1          1</span></span>
<span><span class="co">## StationB         NA      0.375       1.00          1          1</span></span>
<span><span class="co">## StationC         NA         NA       0.25          1          1</span></span></code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and the last few</span></span>
<span><span class="va">camop_hours</span><span class="op">[</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_hours</span><span class="op">)</span><span class="op">-</span><span class="fl">6</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_hours</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-05-11 2009-05-12 2009-05-13 2009-05-14 2009-05-15 2009-05-16</span></span>
<span><span class="co">## StationA          1     1.0000          1       0.75         NA         NA</span></span>
<span><span class="co">## StationB          1     1.0000          1       1.00          1      0.625</span></span>
<span><span class="co">## StationC          1     0.8333          0       0.00          0      0.000</span></span>
<span><span class="co">##          2009-05-17</span></span>
<span><span class="co">## StationA         NA</span></span>
<span><span class="co">## StationB         NA</span></span>
<span><span class="co">## StationC          0</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="differences-between-version-2-1-and-previous-versions">Differences between version 2.1 and previous versions<a class="anchor" aria-label="anchor" href="#differences-between-version-2-1-and-previous-versions"></a>
</h3>
<p>Version 2.1 introduced support of cameraOperation() for date-times in
the setup / retrieval / problem columns. By giving the setup / retrieval
/ problem columns as date-times (and adjusting argument dateFormat
accordingly), one can calculate precise daily effort.</p>
<p>If the times are unknown and users provide dates only to argument
dateFormat, camtrapR will assume that setup and retrieval were at 12
noon. Malfunction periods (indicated by the problem columns) will be
interpreted as the cameras having malfunctioned the whole day.</p>
<p>This is how the handling of setup/retrieval days differs between
dates and date-times in dateFormat:</p>
<table class="table">
<thead><tr class="header">
<th>version</th>
<th>dateFormat is date</th>
<th>dateFormat is date-time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>prior to 2.1</td>
<td>1</td>
<td>not implemented</td>
</tr>
<tr class="even">
<td>2.1 and later</td>
<td>0.5</td>
<td>calculated precisely</td>
</tr>
</tbody>
</table>
<p>This is how the handling of problems / malfunction periods differs
between dates and date-times in dateFormat:</p>
<table class="table">
<thead><tr class="header">
<th>version</th>
<th>dateFormat is date</th>
<th>dateFormat is date-time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>prior to 2.1</td>
<td>0</td>
<td>not implemented</td>
</tr>
<tr class="even">
<td>2.1 and later</td>
<td>0</td>
<td>calculated precisely</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="camera-days-vs--camera-nights">Camera days vs. camera nights<a class="anchor" aria-label="anchor" href="#camera-days-vs--camera-nights"></a>
</h3>
<p>By default, the camera operation matrix refers to days, centered on
noon and lasting from midnight to midnight the next day. In some
situations it can make sense to shift the time frame for analyses, so
the camera operation matrix describes trap nights (centered on midnight,
lasting from noon to noon the next day).</p>
<p>To that end, the argument occasionStartTime can be set. Prior to
version 2.1.0, it was an argument of detectionHistory and
spatialDetectionHistory, but was moved to cameraOperation in v2.1.0. It
can be set to an hour between 0 and 23, describing the hour the
occasions begin.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create camera operation matrix with occasions / trap days starting on noon (until noon the next day)</span></span>
<span><span class="va">camop_hours_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable <span class="op">=</span> <span class="va">camtraps_hrs</span>,</span>
<span>                                  stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                  setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                  retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                  hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                  dateFormat   <span class="op">=</span> <span class="st">"dmy H"</span>,</span>
<span>                                  occasionStartTime <span class="op">=</span> <span class="fl">12</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># now let's have a look at the first few columns of the camera operation matrix</span></span>
<span><span class="va">camop_hours_12</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-04-02+12h 2009-04-03+12h 2009-04-04+12h 2009-04-05+12h</span></span>
<span><span class="co">## StationA              1          1.000           1.00              1</span></span>
<span><span class="co">## StationB             NA          0.875           1.00              1</span></span>
<span><span class="co">## StationC             NA             NA           0.75              1</span></span>
<span><span class="co">##          2009-04-06+12h</span></span>
<span><span class="co">## StationA              1</span></span>
<span><span class="co">## StationB              1</span></span>
<span><span class="co">## StationC              1</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and the last few</span></span>
<span><span class="va">camop_hours_12</span><span class="op">[</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_hours_12</span><span class="op">)</span><span class="op">-</span><span class="fl">6</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">camop_hours_12</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##          2009-05-11+12h 2009-05-12+12h 2009-05-13+12h 2009-05-14+12h</span></span>
<span><span class="co">## StationA              1         1.0000              1           0.25</span></span>
<span><span class="co">## StationB              1         1.0000              1           1.00</span></span>
<span><span class="co">## StationC              1         0.3333              0           0.00</span></span>
<span><span class="co">##          2009-05-15+12h 2009-05-16+12h 2009-05-17+12h</span></span>
<span><span class="co">## StationA             NA             NA             NA</span></span>
<span><span class="co">## StationB              1          0.125             NA</span></span>
<span><span class="co">## StationC              0          0.000             NA</span></span></code></pre>
<p>The column names now indicate the shift, “+12h” in the example above.
That means that the first column shows the effort from 12 noon on
2009-04-02 until 12 noon 2009-04-03.</p>
<p>When using this camera operation matrix in detectionHistory or
spatialDetectionHistory, the shift will be extracted and trapping effort
will be calculated accordingly. Therefore, the argument
occasionStartTime in these two functions is deprecated from version
2.1.0.</p>
</div>
<div class="section level3">
<h3 id="combining-multiple-cameras-per-station">Combining multiple cameras per station<a class="anchor" aria-label="anchor" href="#combining-multiple-cameras-per-station"></a>
</h3>
<p>Often multiple cameras are set at a station, but data are to be
analysed on a station-level, not at the level of individual cameras.
cameraOperation can combine these effort of individual cameras according
to how they were set up.</p>
<p>First, let’s create a simple artifial data set. Note how the columns
contain an hour (e.g. 12 noon in this case: “2020-01-01 12”). Other
formats for date-time are possible and can be specified with argument
dateFormat in cameraOperation.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camtraps_by_camera</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span><span class="op">)</span>,</span>
<span>                        camera <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cam1"</span>, <span class="st">"cam2"</span><span class="op">)</span>,</span>
<span>                        setup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-01 12"</span><span class="op">)</span>,</span>
<span>                        retrieval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-08 18"</span>, <span class="st">"2020-01-07 18"</span><span class="op">)</span>,</span>
<span>                        Problem1_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-03 12"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>                        Problem1_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-05 18"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>                        Problem2_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-06 12"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>                        Problem2_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-07 12"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">camtraps_by_camera</span></span></code></pre></div>
<pre><code><span><span class="co">##   Station camera         setup     retrieval Problem1_from   Problem1_to</span></span>
<span><span class="co">## 1       A   cam1 2020-01-01 12 2020-01-08 18 2020-01-03 12 2020-01-05 18</span></span>
<span><span class="co">## 2       A   cam2 2020-01-01 12 2020-01-07 18          &lt;NA&gt;          &lt;NA&gt;</span></span>
<span><span class="co">##   Problem2_from   Problem2_to</span></span>
<span><span class="co">## 1 2020-01-06 12 2020-01-07 12</span></span>
<span><span class="co">## 2          &lt;NA&gt;          &lt;NA&gt;</span></span></code></pre>
<p>To aggregate data from cameras to station, you need a camera column
(“camera” in the example above). Furthermore, set argument byCamera =
FALSE. Then, the combinations of the arguments camerasIndependent and
allCamsOn define how effort from individual cameras is combined.
allCamsOn means all cameras need to be active for a station to be
considered active. camerasIndepndent specifies whether the cameras
accumulate effort independently or now. See ?cameraoperation for
details.</p>
<p>Below we’ll run cameraOperation of the little sample table
camtraps_by_camera, for all possible combinations of allCamsOn,
cameraOperation and hasProblems.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list of common arguments for the different function runs</span></span>
<span> <span class="va">args.common</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>CTtable <span class="op">=</span> <span class="va">camtraps_by_camera</span>,</span>
<span>  stationCol <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>  cameraCol  <span class="op">=</span> <span class="st">"camera"</span>,</span>
<span>  setupCol   <span class="op">=</span> <span class="st">"setup"</span>,</span>
<span>  retrievalCol <span class="op">=</span> <span class="st">"retrieval"</span>,</span>
<span>  dateFormat <span class="op">=</span> <span class="st">"ymd H"</span>,</span>
<span>  byCamera <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  writecsv <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span> </span>
<span><span class="co"># combinations of the arguments of interest</span></span>
<span> <span class="va">fun.args0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>allCamsOn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">T</span>,<span class="cn">F</span><span class="op">)</span>,</span>
<span>                                 camerasIndependent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">T</span>,<span class="cn">F</span><span class="op">)</span>,</span>
<span>                                 hasProblems <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">T</span>,<span class="cn">F</span><span class="op">)</span><span class="op">)</span></span>
<span> </span>
<span> <span class="co"># create a list of function arguments with the varying arguments</span></span>
<span>   <span class="va">fun.args1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">fun.args0</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">args.common</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>   </span>
<span>   <span class="co"># run cameraOperation on each combination of arguments, and combine into an output table with the function arguments</span></span>
<span>   <span class="va">camOp_station_aggregation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">fun.args0</span>, <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">fun.args1</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>     <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">cameraOperation</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p>Now let’s see how the daily effort was combined for the different
combinations of allCamsOn and camerasIndependent when hasProblems is
FALSE.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>   <span class="va">camOp_station_aggregation</span> <span class="op">[</span><span class="va">camOp_station_aggregation</span><span class="op">$</span><span class="va">hasProblems</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="op">-</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##   allCamsOn camerasIndependent 2020-01-01 2020-01-02 2020-01-03 2020-01-04</span></span>
<span><span class="co">## 5      TRUE               TRUE        1.0          2          2          2</span></span>
<span><span class="co">## 6     FALSE               TRUE        1.0          2          2          2</span></span>
<span><span class="co">## 7      TRUE              FALSE        0.5          1          1          1</span></span>
<span><span class="co">## 8     FALSE              FALSE        0.5          1          1          1</span></span>
<span><span class="co">##   2020-01-05 2020-01-06 2020-01-07 2020-01-08</span></span>
<span><span class="co">## 5          2          2      1.500         NA</span></span>
<span><span class="co">## 6          2          2      1.750       0.75</span></span>
<span><span class="co">## 7          1          1      0.750         NA</span></span>
<span><span class="co">## 8          1          1      0.875       0.75</span></span></code></pre>
<p>sS you can see, allCamsOn has no effect if all cameras were active
(due to hasProblems = FALSE). The differences on the setup/retrieval day
are due to camerasIndependent.</p>
<p>Now with hasProblems = TRUE:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>   <span class="va">camOp_station_aggregation</span> <span class="op">[</span><span class="va">camOp_station_aggregation</span><span class="op">$</span><span class="va">hasProblems</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="op">-</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##   allCamsOn camerasIndependent 2020-01-01 2020-01-02 2020-01-03 2020-01-04</span></span>
<span><span class="co">## 1      TRUE               TRUE        1.0          2       1.00        0.0</span></span>
<span><span class="co">## 2     FALSE               TRUE        1.0          2       1.50        1.0</span></span>
<span><span class="co">## 3      TRUE              FALSE        0.5          1       0.50        0.0</span></span>
<span><span class="co">## 4     FALSE              FALSE        0.5          1       0.75        0.5</span></span>
<span><span class="co">##   2020-01-05 2020-01-06 2020-01-07 2020-01-08</span></span>
<span><span class="co">## 1      0.500       1.00      1.000         NA</span></span>
<span><span class="co">## 2      1.250       1.50      1.250       0.75</span></span>
<span><span class="co">## 3      0.250       0.50      0.500         NA</span></span>
<span><span class="co">## 4      0.625       0.75      0.625       0.75</span></span></code></pre>
<p>Here’s how the daily aggregates are calculate for the different
combinations of allCamsOn and camerasIndependent, and depending on
whether input columns are date or date-time (from v2.1.0). In the table
below, x is a vector of values at individual cameras for one day
(e.g. c(1,0.5) when one camera was active the whole day, the other
cameras half a day).</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th>camerasIndependent</th>
<th>allCamsOn</th>
<th>input columns</th>
<th>aggregate with</th>
<th>example c(1, 0.5)</th>
<th>example c(1, 1)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>TRUE</td>
<td>date-time</td>
<td>ifelse(all(x == 1), sum(x), min(x) * length(x))</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>TRUE</td>
<td>date</td>
<td>ifelse(all(x == 1), sum(x), 0)</td>
<td>0</td>
<td>2</td>
</tr>
<tr class="odd">
<td>TRUE</td>
<td>FALSE</td>
<td>date-time</td>
<td>sum</td>
<td>1.5</td>
<td>2</td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>FALSE</td>
<td>date</td>
<td>sum</td>
<td>1.5</td>
<td>2</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>TRUE</td>
<td>date-time</td>
<td>min</td>
<td>0.5</td>
<td>1</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>TRUE</td>
<td>date</td>
<td>ifelse(all(x == 1), 1, 0)</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>FALSE</td>
<td>date-time</td>
<td>mean</td>
<td>0.75</td>
<td>2</td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>FALSE</td>
<td>date</td>
<td>ifelse(sum(x, na.rm = TRUE) &gt;= 1, 1, sum(x, na.rm = TRUE))</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="plotting-camera-operation-matrices">Plotting camera operation matrices<a class="anchor" aria-label="anchor" href="#plotting-camera-operation-matrices"></a>
</h3>
<p>There is a little function for plotting the camera operation matrix
included in the package, but not exported in the Namespace. It is
accessible with camtrapR:::camopPlot(). Imagine there is a typo in one
of your date fields and the setup or retrieval year is wrong. You will
easily be able to spot it this way.</p>
<p>Here is the camera operation matrix calculated above (in two
different color palettes, the default being the viridis palette -
requires R 3.6.0 or higher).</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span>camOp <span class="op">=</span> <span class="va">camop_problem</span><span class="op">)</span></span>
<span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span>camOp <span class="op">=</span> <span class="va">camop_problem</span>, palette <span class="op">=</span> <span class="st">"Heat"</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<!--  ```{r include = FALSE} -->
<!--   par(mfrow = c(1,2)) -->
<!--  ``` -->
<p>One can also plot with the levelplot function from the lattice
package:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span>camOp <span class="op">=</span> <span class="va">camop_problem</span>, lattice <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span>camOp <span class="op">=</span> <span class="va">camop_problem</span>, palette <span class="op">=</span> <span class="st">"Heat"</span>, lattice <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-21-2.png" width="700"></p>
<p>Here is what it would look like if the year is wrong for one
station.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camtraps_typo</span> <span class="op">&lt;-</span> <span class="va">camtraps</span></span>
<span><span class="co"># replace 2009 with 2008 in setup date of station A</span></span>
<span><span class="va">camtraps_typo</span><span class="op">$</span><span class="va">Setup_date</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"2009"</span>, <span class="st">"2008"</span>, <span class="va">camtraps_typo</span><span class="op">$</span><span class="va">Setup_date</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">camop_typo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps_typo</span>,</span>
<span>                                 stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                 setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                 retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                 writecsv     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                 dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span><span class="va">camop_typo</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>Note that the colors are stretched between the lowest and highest
value. There is no dedicated color for 0, designating non-operational
cameras.</p>
<p>For a list of color palettes, see <a href="https://developer.r-project.org/Blog/public/2019/04/01/hcl-based-color-palettes-in-grdevices/index.html" class="external-link">here</a>.</p>
</div>
<div class="section level3">
<h3 id="saving-and-loading-camera-operation-matrices">Saving and loading camera operation matrices<a class="anchor" aria-label="anchor" href="#saving-and-loading-camera-operation-matrices"></a>
</h3>
<p>The camera operation matrix can easily be saved as a csv file (by
setting argument <code>writecsv = TRUE</code>,
<code>check.names = FALSE</code> and defining <code>outdir</code>). In
order to load the csv into R again, it is necessary to tell R to use the
station IDs (the first column) as row names:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camOp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">...</span>, row.names <span class="op">=</span> <span class="fl">1</span>, check.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><code>check.names = FALSE</code> ensures that column names (the
dates) are read back into R as they are (e.g. “2015-12-01”). Otherwise
one may end up with unreadable column names (at least for camtrapR) such
as “X2015.12.01”.</p>
</div>
</div>
<div class="section level2">
<h2 id="input-for-subsequent-analyses-single-season">Input for subsequent analyses (single-season)<a class="anchor" aria-label="anchor" href="#input-for-subsequent-analyses-single-season"></a>
</h2>
<p>It is very easy to prepare input for single-season occupancy and
spatial capture-recapture (SCR) analyses in camtrapR. All one needs it a
record table and the camera operation matrix. Making input for SCR
analyses further requires the camera trap station table.</p>
<div class="section level3">
<h3 id="occupancy-analyses">Occupancy analyses<a class="anchor" aria-label="anchor" href="#occupancy-analyses"></a>
</h3>
<p>Occupancy models use detection/non-detection matrices in which for
every station and every occasion “1”” signifies a detection of a given
species, “0”” signifies non-detecion, and NA missing data.</p>
<p>Here is how to obtain a detection/non-detection matrix using function
<code>detectionHistory</code>. Because the function builds on prior
functions (<code>recordTable</code> and <code>cameraOperation</code>) we
also show these function here to provide the context.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create camera operation matrix</span></span>
<span><span class="va">camop_no_problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps</span>,</span>
<span>                                    stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                    setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                    retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                    hasProblems  <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                    dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define image directory</span></span>
<span><span class="va">wd_images_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make record table</span></span>
<span><span class="va">recordTableSample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recordTable.html">recordTable</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID</span>,</span>
<span>                                 IDfrom              <span class="op">=</span> <span class="st">"directory"</span>,</span>
<span>                                 minDeltaTime        <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                                 deltaTimeComparedTo <span class="op">=</span> <span class="st">"lastIndependentRecord"</span>,</span>
<span>                                 timeZone            <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## StationA:      8 images    0 duplicates removed      |=======             |   33%</span></span></code></pre>
<pre><code><span><span class="co">## StationB:     23 images    6 duplicates removed      |=============       |   67%</span></span></code></pre>
<pre><code><span><span class="co">## StationC:     37 images    6 duplicates removed      |====================|  100%</span></span></code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make detection history (without trapping effort)</span></span>
<span><span class="va">DetHist1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detectionHistory.html">detectionHistory</a></span><span class="op">(</span>recordTable         <span class="op">=</span> <span class="va">recordTableSample</span>,</span>
<span>                            camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span>
<span>                            stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                            speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                            recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                            species              <span class="op">=</span> <span class="st">"VTA"</span>,</span>
<span>                            occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                            day1                 <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                            includeEffort        <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: timeZone is not specified. Assuming UTC</span></span></code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DetHist1</span></span></code></pre></div>
<pre><code><span><span class="co">## $detection_history</span></span>
<span><span class="co">##          o1 o2 o3 o4 o5 o6 o7</span></span>
<span><span class="co">## StationA  0  1  0  0  1  0 NA</span></span>
<span><span class="co">## StationB  0  1  0  1  0  0 NA</span></span>
<span><span class="co">## StationC  0  0  1  0  0  0 NA</span></span></code></pre>
<p>Note the warning about the missing time zone (as in the functions
<code>recordTable</code> and <code>recordTable</code>). Normally, it
should be fine, but to be on the safe side, better set it to your study
area’s time zone.</p>
<p>If trapping effort is thought to influence detection probability, it
can be returned by setting <code>includeEffort = TRUE</code>. This way
the number of active trapping days per occasion and station is
returned.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make detection history (with trapping effort)</span></span>
<span><span class="va">DetHist2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detectionHistory.html">detectionHistory</a></span><span class="op">(</span>recordTable          <span class="op">=</span> <span class="va">recordTableSample</span>,</span>
<span>                             camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span>
<span>                             stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                             speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                             recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                             species              <span class="op">=</span> <span class="st">"VTA"</span>,</span>
<span>                             timeZone             <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span>
<span>                             occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                             day1                 <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                             includeEffort        <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                             scaleEffort          <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">DetHist2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>  <span class="co"># detection history</span></span></code></pre></div>
<pre><code><span><span class="co">##          o1 o2 o3 o4 o5 o6 o7</span></span>
<span><span class="co">## StationA  0  1  0  0  1  0  0</span></span>
<span><span class="co">## StationB  0  1  0  1  0  0  0</span></span>
<span><span class="co">## StationC  0  0  1  0  0  0  0</span></span></code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DetHist2</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>  <span class="co"># effort (in days per occasion)</span></span></code></pre></div>
<pre><code><span><span class="co">##           o1 o2 o3 o4 o5 o6  o7</span></span>
<span><span class="co">## StationA 6.5  7  7  7  7  7 0.5</span></span>
<span><span class="co">## StationB 6.5  7  7  7  7  7 1.5</span></span>
<span><span class="co">## StationC 6.5  7  7  7  7  7 1.5</span></span></code></pre>
<p>To help with convergence of models, the effort matrix can be scaled
to mean = 0 and sd = 1 by setting <code>scaleEffort = TRUE</code>. If
<code>writecsv = TRUE</code>, the scaling parameters will also be saved
in a separate csv file.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DetHist3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detectionHistory.html">detectionHistory</a></span><span class="op">(</span>recordTable          <span class="op">=</span> <span class="va">recordTableSample</span>,</span>
<span>                             camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span>
<span>                             stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                             speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                             recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                             species              <span class="op">=</span> <span class="st">"VTA"</span>,</span>
<span>                             timeZone             <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span>
<span>                             occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                             day1                 <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                             includeEffort        <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                             scaleEffort          <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">DetHist3</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>  <span class="co"># detection history (same as above)</span></span></code></pre></div>
<pre><code><span><span class="co">##          o1 o2 o3 o4 o5 o6 o7</span></span>
<span><span class="co">## StationA  0  1  0  0  1  0  0</span></span>
<span><span class="co">## StationB  0  1  0  1  0  0  0</span></span>
<span><span class="co">## StationC  0  0  1  0  0  0  0</span></span></code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DetHist3</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>  <span class="co"># effort (scaled)</span></span></code></pre></div>
<pre><code><span><span class="co">##                 o1        o2        o3        o4        o5        o6        o7</span></span>
<span><span class="co">## StationA 0.1948432 0.4355319 0.4355319 0.4355319 0.4355319 0.4355319 -2.693421</span></span>
<span><span class="co">## StationB 0.1948432 0.4355319 0.4355319 0.4355319 0.4355319 0.4355319 -2.212043</span></span>
<span><span class="co">## StationC 0.1948432 0.4355319 0.4355319 0.4355319 0.4355319 0.4355319 -2.212043</span></span></code></pre>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DetHist3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>  <span class="co"># scaling parameters for back-transformation</span></span></code></pre></div>
<pre><code><span><span class="co">##   effort.scaled.center effort.scaled.scale</span></span>
<span><span class="co">## 1             6.095238            2.077372</span></span></code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># backtransform scaled effort like this if needed</span></span>
<span><span class="op">(</span><span class="va">DetHist3</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="va">DetHist3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">effort.scaled.scale</span><span class="op">)</span> <span class="op">+</span> <span class="va">DetHist3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">effort.scaled.center</span></span></code></pre></div>
<pre><code><span><span class="co">##           o1 o2 o3 o4 o5 o6  o7</span></span>
<span><span class="co">## StationA 6.5  7  7  7  7  7 0.5</span></span>
<span><span class="co">## StationB 6.5  7  7  7  7  7 1.5</span></span>
<span><span class="co">## StationC 6.5  7  7  7  7  7 1.5</span></span></code></pre>
<div class="section level4">
<h4 id="handling-of-incomplete-occasions">Handling of incomplete occasions<a class="anchor" aria-label="anchor" href="#handling-of-incomplete-occasions"></a>
</h4>
<p>The following table shows the behaviour of the
<code>detectionHistory</code> function for different combinations of the
function arguments <code>includeEffort</code> and
<code>minActiveDaysPerOccasion</code> and different occasion-level
camera operation values (table head, column 3-7). Depending on these
arguments, incomplete occasions will either NA or have values of 0/1
(depending on whether there was a detection) in the output detection
matrix .</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th>includeEffort</th>
<th>minActiveDaysPerOccasion</th>
<th>camera operation all 1</th>
<th>at least one 1</th>
<th>all 0</th>
<th>0 and NA</th>
<th>all NA</th>
<th></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>TRUE</td>
<td>not defined</td>
<td>0/1</td>
<td>0/1</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr class="even">
<td>TRUE</td>
<td>defined</td>
<td>0/1</td>
<td>0/1/NA*</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr class="odd">
<td>FALSE</td>
<td>not defined</td>
<td>0/1</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
<tr class="even">
<td>FALSE</td>
<td>defined</td>
<td>0/1</td>
<td>0/1/NA*</td>
<td>NA</td>
<td>NA</td>
<td>NA</td>
<td></td>
</tr>
</tbody>
</table>
<p>*: NA if there were less active days in an occasion than
<code>minActiveDaysPerOccasion</code></p>
<p>The same applies to generation of input for spatial capture-recapture
analyses using <code>spatialDetectionHistory</code> as described
below.</p>
</div>
<div class="section level4">
<h4 id="saving-and-loading-detection-histories">Saving and loading detection histories<a class="anchor" aria-label="anchor" href="#saving-and-loading-detection-histories"></a>
</h4>
<p>The detection history and effort matrices can easily be saved as csv
files (by setting argument <code>writecsv = TRUE</code> and defining
<code>outdir</code>). In order to load the csv into R again, it is
necessary to tell R to use the station IDs as row names:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">detHist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">...</span>, row.names <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">effort</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">...</span>, row.names <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="spatial-capture-recapture-analyses">Spatial Capture-Recapture analyses<a class="anchor" aria-label="anchor" href="#spatial-capture-recapture-analyses"></a>
</h3>
<p>Input for spatial capture-recapture analyses can be generated in the
form of <code>capthist</code>-objects as defined in the
<code>secr</code> package with the function
<code>spatialDetectionHistory</code>. Output can be in the form of
counts (number of individual detections per occasion, argument, argument
<code>output = "count"</code>) or binary (was an individual detected
during an occasion, argument <code>output = "binary"</code>). note that
the detector type will change accordingly: “proximity” if
<code>output = "binary"</code> and “count” if
<code>output = "count"</code>.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableIndividualSample</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create camera operation matrix (with problems/malfunction)</span></span>
<span><span class="va">camop_problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps</span>,</span>
<span>                                 stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                 setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                 retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                 writecsv     <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                 dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sdh</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spatialDetectionHistory.html">spatialDetectionHistory</a></span><span class="op">(</span>recordTableIndividual <span class="op">=</span> <span class="va">recordTableIndividualSample</span>, </span>
<span>                               species               <span class="op">=</span> <span class="st">"LeopardCat"</span>,  </span>
<span>                               output                <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>                               camOp                 <span class="op">=</span> <span class="va">camop_problem</span>, </span>
<span>                               CTtable               <span class="op">=</span> <span class="va">camtraps</span>,</span>
<span>                               stationCol            <span class="op">=</span> <span class="st">"Station"</span>, </span>
<span>                               speciesCol            <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                               Xcol                  <span class="op">=</span> <span class="st">"utm_x"</span>,</span>
<span>                               Ycol                  <span class="op">=</span> <span class="st">"utm_y"</span>,</span>
<span>                               individualCol         <span class="op">=</span> <span class="st">"Individual"</span>,</span>
<span>                               recordDateTimeCol     <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                               recordDateTimeFormat  <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>,</span>
<span>                               occasionLength        <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                               day1                  <span class="op">=</span> <span class="st">"survey"</span>,</span>
<span>                               includeEffort         <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                               timeZone              <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span><span class="co"># missing space in species = "LeopardCat" was introduced by recordTableIndividual </span></span>
<span><span class="co"># (because of CRAN package policies). </span></span>
<span><span class="co"># In your own data you can have spaces in your directory names.</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sdh</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Object class       capthist </span></span>
<span><span class="co">## Detector type      proximity </span></span>
<span><span class="co">## Detector number    3 </span></span>
<span><span class="co">## Average spacing    2258.871 m </span></span>
<span><span class="co">## x-range            523000 526000 m </span></span>
<span><span class="co">## y-range            604000 607050 m </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Usage range by occasion</span></span>
<span><span class="co">##       1  2  3  4   5</span></span>
<span><span class="co">## min 7.5 10 10 10 0.0</span></span>
<span><span class="co">## max 9.5 10 10 10 4.5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Counts by occasion </span></span>
<span><span class="co">##                   1 2 3 4 5 Total</span></span>
<span><span class="co">## n                 2 2 3 2 1    10</span></span>
<span><span class="co">## u                 2 0 1 0 0     3</span></span>
<span><span class="co">## f                 0 1 0 2 0     3</span></span>
<span><span class="co">## M(t+1)            2 2 3 3 3     3</span></span>
<span><span class="co">## losses            0 0 0 0 0     0</span></span>
<span><span class="co">## detections        3 4 4 3 1    15</span></span>
<span><span class="co">## detectors visited 2 3 3 2 1    11</span></span>
<span><span class="co">## detectors used    3 3 3 3 2    14</span></span></code></pre>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sdh</span>, tracks <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in plot.capthist(sdh, tracks = TRUE): track for repeat detections on</span></span>
<span><span class="co">## same occasion joins points in arbitrary sequence</span></span></code></pre>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="input-for-subsequent-analyses-multi-season">Input for subsequent analyses (multi-season)<a class="anchor" aria-label="anchor" href="#input-for-subsequent-analyses-multi-season"></a>
</h2>
<p>Since version 1.2, camtrapR can prepare input for multi-season
occupancy and spatial capture-recapture analyses (in unmarked and secr).
The process is very similar to the one for single-season models.</p>
<div class="section level3">
<h3 id="multi-season-occupancy-analyses">Multi-season occupancy analyses<a class="anchor" aria-label="anchor" href="#multi-season-occupancy-analyses"></a>
</h3>
<p>camtrapR prepares detection histories that can be used as input for
argument <code>y</code> in function <code>unmarkedMultFrame</code>.
<code>unmarkedMultFrame</code> creates the input for function
<code>colext</code> which fits multi-season occupancy models.</p>
<p>For multi-season occupancy, we need a session column in the camera
trap table. Records will be assigned to session automatically based on
their dates.</p>
<p>First we simulate data for 2 seasons by duplicating the existing
sample data and adjusting the dates (add 1 year)</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load multi-season data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableSampleMultiSeason</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># also, for clarity, lets remove all unnecessary columns from the record table</span></span>
<span><span class="va">recordTableSampleMultiSeason</span> <span class="op">&lt;-</span> <span class="va">recordTableSampleMultiSeason</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Station"</span>, <span class="st">"Species"</span>, <span class="st">"DateTimeOriginal"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># create camera operation matrix</span></span>
<span><span class="va">camop_season</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable         <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span>
<span>                                    stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                    setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                    sessionCol   <span class="op">=</span> <span class="st">"session"</span>,</span>
<span>                                    retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                    hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                    dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot camera operation matrix</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>oma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">7</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">camtrapR</span><span class="fu">:::</span><span class="fu">camopPlot</span><span class="op">(</span><span class="va">camop_season</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make multi-season detection history</span></span>
<span><span class="va">DetHist_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/detectionHistory.html">detectionHistory</a></span><span class="op">(</span>recordTable   <span class="op">=</span> <span class="va">recordTableSampleMultiSeason</span>,</span>
<span>                            camOp                <span class="op">=</span> <span class="va">camop_season</span>,</span>
<span>                            stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                            speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                            species              <span class="op">=</span> <span class="st">"VTA"</span>,</span>
<span>                            occasionLength       <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                            day1                 <span class="op">=</span> <span class="st">"station"</span>,</span>
<span>                            recordDateTimeCol     <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                            includeEffort        <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            scaleEffort          <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            timeZone             <span class="op">=</span> <span class="st">"UTC"</span>,</span>
<span>                            unmarkedMultFrameInput <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">DetHist_multi</span></span></code></pre></div>
<pre><code><span><span class="co">## $detection_history</span></span>
<span><span class="co">##          o1 o2 o3 o4 o5 o6 o7 o8 o1 o2 o3 o4 o5 o6 o7 o8</span></span>
<span><span class="co">## StationA  1  0  0  1  0 NA NA NA  1  0  0  1  0 NA NA NA</span></span>
<span><span class="co">## StationB  0  1  1  0  0 NA NA NA  0  1  1  0  0 NA NA NA</span></span>
<span><span class="co">## StationC  0  0  1  0 NA NA NA NA  0  0  1  0 NA NA NA NA</span></span>
<span><span class="co">## StationD NA NA NA NA NA NA NA NA  0  0  0  0  0  0  0  0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $effort</span></span>
<span><span class="co">##           o1 o2 o3 o4  o5 o6 o7 o8  o1 o2 o3 o4  o5 o6 o7  o8</span></span>
<span><span class="co">## StationA 9.5 10 10 10 2.5 NA NA NA 9.5 10 10 10 2.5 NA NA  NA</span></span>
<span><span class="co">## StationB 9.5 10 10 10 3.5 NA NA NA 9.5 10 10 10 3.5 NA NA  NA</span></span>
<span><span class="co">## StationC 9.5 10 10  8  NA NA NA NA 9.5 10 10  8  NA NA NA  NA</span></span>
<span><span class="co">## StationD  NA NA NA NA  NA NA NA NA 9.5 10 10 10 6.0  3 10 4.5</span></span></code></pre>
<p>Note that the function makes sure that all seasons have identical
number of occasions, and that all stations are represented, even if they
were not sampled in all seasons.</p>
<p>From here, the resulting object can be used in unmarked.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">year_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               ncol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">Station</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this is a made up example table with station covariates for demonstration</span></span>
<span><span class="va">site_covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">DetHist_multi</span><span class="op">$</span><span class="va">detection_history</span><span class="op">)</span>,</span>
<span>                              elevation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">500</span>, <span class="fl">300</span><span class="op">)</span>,</span>
<span>                              treecover <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">umf</span> <span class="op">&lt;-</span> <span class="fu">unmarked</span><span class="fu">::</span><span class="fu"><a href="https://rbchan.github.io/unmarked/reference/unmarkedMultFrame.html" class="external-link">unmarkedMultFrame</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">DetHist_multi</span><span class="op">$</span><span class="va">detection_history</span>,</span>
<span>                                   siteCovs <span class="op">=</span> <span class="va">site_covariates</span>,</span>
<span>                                   yearlySiteCovs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">year_matrix</span><span class="op">)</span>,</span>
<span>                                   obsCovs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>effort <span class="op">=</span> <span class="va">DetHist_multi</span><span class="op">$</span><span class="va">effort</span><span class="op">)</span>,</span>
<span>                                   numPrimary <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: siteCovs contains characters. Converting them to factors.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: yearlySiteCovs contains characters. Converting them to factors.</span></span></code></pre>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">colext_example</span> <span class="op">&lt;-</span> <span class="fu">unmarked</span><span class="fu">::</span><span class="fu"><a href="https://rbchan.github.io/unmarked/reference/colext.html" class="external-link">colext</a></span><span class="op">(</span>psiformula <span class="op">=</span> <span class="op">~</span> <span class="va">treecover</span>,    <span class="co"># First-year occupancy</span></span>
<span>                                   gammaformula <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span>,          <span class="co"># Colonization</span></span>
<span>                                   epsilonformula <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span>,        <span class="co"># Extinction</span></span>
<span>                                   pformula <span class="op">=</span> <span class="op">~</span> <span class="va">effort</span>,         <span class="co"># Detection</span></span>
<span>                                   data <span class="op">=</span> <span class="va">umf</span>,</span>
<span>                                   method<span class="op">=</span><span class="st">"BFGS"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">colext_example</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## unmarked::colext(psiformula = ~treecover, gammaformula = ~1, </span></span>
<span><span class="co">##     epsilonformula = ~1, pformula = ~effort, data = umf, method = "BFGS")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Initial (logit-scale):</span></span>
<span><span class="co">##             Estimate    SE      z P(&gt;|z|)</span></span>
<span><span class="co">## (Intercept)   -9.504 28.60 -0.332    0.74</span></span>
<span><span class="co">## treecover      0.342  1.23  0.279    0.78</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Colonization (logit-scale):</span></span>
<span><span class="co">##  Estimate   SE      z P(&gt;|z|)</span></span>
<span><span class="co">##      -6.6 27.3 -0.242   0.809</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Extinction (logit-scale):</span></span>
<span><span class="co">##  Estimate   SE      z P(&gt;|z|)</span></span>
<span><span class="co">##     -7.89 29.4 -0.269   0.788</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Detection (logit-scale):</span></span>
<span><span class="co">##             Estimate    SE     z P(&gt;|z|)</span></span>
<span><span class="co">## (Intercept)   -17.46 14.73 -1.19   0.236</span></span>
<span><span class="co">## effort          1.75  1.49  1.17   0.241</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## AIC: 42.03042 </span></span>
<span><span class="co">## Number of sites: 4</span></span>
<span><span class="co">## optim convergence code: 0</span></span>
<span><span class="co">## optim iterations: 45 </span></span>
<span><span class="co">## Bootstrap iterations: 0</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="multi-season-spatial-capture-recapture">Multi-season spatial capture-recapture<a class="anchor" aria-label="anchor" href="#multi-season-spatial-capture-recapture"></a>
</h3>
<p>For secr, session IDs must be a gapless sequence of numbers beginning
with 1. So 2009 becomes season 1 and 2010 season 2</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">[</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span> <span class="op">==</span> <span class="fl">2009</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">[</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span> <span class="op">==</span> <span class="fl">2010</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span></span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we also want a few records in season 2</span></span>
<span><span class="va">recordTableIndividualSample_season2</span> <span class="op">&lt;-</span> <span class="va">recordTableIndividualSample</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="va">recordTableIndividualSample_season2</span><span class="op">$</span><span class="va">DateTimeOriginal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"2009"</span>, <span class="st">"2010"</span>, <span class="va">recordTableIndividualSample_season2</span><span class="op">$</span><span class="va">DateTimeOriginal</span><span class="op">)</span></span>
<span><span class="va">recordTableIndividualSample_season</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">recordTableIndividualSample</span>, <span class="va">recordTableIndividualSample_season2</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># for clarity, lets remove all unnecessary columns</span></span>
<span><span class="va">recordTableIndividualSample_season</span> <span class="op">&lt;-</span> <span class="va">recordTableIndividualSample_season</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Station"</span>, <span class="st">"Species"</span>, <span class="st">"Individual"</span>, <span class="st">"DateTimeOriginal"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create camera operation matrix (with problems/malfunction), same as above for multi-season occupancy</span></span>
<span><span class="va">camop_season</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable         <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span>
<span>                                    stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                                    setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span>
<span>                                    sessionCol   <span class="op">=</span> <span class="st">"session"</span>,</span>
<span>                                    retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span>
<span>                                    hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                    dateFormat   <span class="op">=</span> <span class="va">dateFormat</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># create capthist object</span></span>
<span><span class="va">sdh_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spatialDetectionHistory.html">spatialDetectionHistory</a></span><span class="op">(</span>recordTableIndividual <span class="op">=</span> <span class="va">recordTableIndividualSample_season</span>,</span>
<span>                               species                 <span class="op">=</span> <span class="st">"LeopardCat"</span>,</span>
<span>                               output                  <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>                               camOp                   <span class="op">=</span> <span class="va">camop_season</span>,</span>
<span>                               CTtable                 <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span>
<span>                               stationCol              <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>                               speciesCol              <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>                               sessionCol              <span class="op">=</span> <span class="st">"session"</span>,</span>
<span>                               Xcol                    <span class="op">=</span> <span class="st">"utm_x"</span>,</span>
<span>                               Ycol                    <span class="op">=</span> <span class="st">"utm_y"</span>,</span>
<span>                               individualCol           <span class="op">=</span> <span class="st">"Individual"</span>,</span>
<span>                               recordDateTimeCol       <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>                               recordDateTimeFormat    <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>,</span>
<span>                               occasionLength          <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                               day1                    <span class="op">=</span> <span class="st">"survey"</span>,</span>
<span>                               includeEffort           <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                               timeZone                <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span>
<span>                               stationCovariateCols    <span class="op">=</span> <span class="st">"utm_y"</span>,       <span class="co"># made up, a potential site covariate from camtrapsMultiSeason</span></span>
<span>                               individualCovariateCols <span class="op">=</span> <span class="st">"Individual"</span>   <span class="co"># made up, a potential individual covariate from recordTable</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sdh_multi</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $`1`</span></span>
<span><span class="co">## Object class       capthist </span></span>
<span><span class="co">## Detector type      proximity </span></span>
<span><span class="co">## Detector number    3 </span></span>
<span><span class="co">## Average spacing    2258.871 m </span></span>
<span><span class="co">## x-range            523000 526000 m </span></span>
<span><span class="co">## y-range            604000 607050 m </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Usage range by occasion</span></span>
<span><span class="co">##       1  2  3  4   5</span></span>
<span><span class="co">## min 7.5 10 10 10 0.0</span></span>
<span><span class="co">## max 9.5 10 10 10 4.5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Counts by occasion </span></span>
<span><span class="co">##                   1 2 3 4 5 Total</span></span>
<span><span class="co">## n                 2 2 3 2 1    10</span></span>
<span><span class="co">## u                 2 0 1 0 0     3</span></span>
<span><span class="co">## f                 0 1 0 2 0     3</span></span>
<span><span class="co">## M(t+1)            2 2 3 3 3     3</span></span>
<span><span class="co">## losses            0 0 0 0 0     0</span></span>
<span><span class="co">## detections        3 4 4 3 1    15</span></span>
<span><span class="co">## detectors visited 2 3 3 2 1    11</span></span>
<span><span class="co">## detectors used    3 3 3 3 2    14</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Individual covariates</span></span>
<span><span class="co">##  Individual</span></span>
<span><span class="co">##  1:1       </span></span>
<span><span class="co">##  2:1       </span></span>
<span><span class="co">##  3:1       </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`2`</span></span>
<span><span class="co">## Object class       capthist </span></span>
<span><span class="co">## Detector type      proximity </span></span>
<span><span class="co">## Detector number    4 </span></span>
<span><span class="co">## Average spacing    2258.871 m </span></span>
<span><span class="co">## x-range            523000 526000 m </span></span>
<span><span class="co">## y-range            604000 607050 m </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Usage range by occasion</span></span>
<span><span class="co">##       1  2  3  4  5 6 7  8   9</span></span>
<span><span class="co">## min 2.5 10 10 10  5 0 0  0 0.0</span></span>
<span><span class="co">## max 4.5 10 10 10 10 3 6 10 1.5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Counts by occasion </span></span>
<span><span class="co">##                   1 2 3 4 5 6 7 8 9 Total</span></span>
<span><span class="co">## n                 1 2 2 0 1 0 0 0 0     6</span></span>
<span><span class="co">## u                 1 1 0 0 0 0 0 0 0     2</span></span>
<span><span class="co">## f                 0 0 2 0 0 0 0 0 0     2</span></span>
<span><span class="co">## M(t+1)            1 2 2 2 2 2 2 2 2     2</span></span>
<span><span class="co">## losses            0 0 0 0 0 0 0 0 0     0</span></span>
<span><span class="co">## detections        1 2 2 0 1 0 0 0 0     6</span></span>
<span><span class="co">## detectors visited 1 1 2 0 1 0 0 0 0     5</span></span>
<span><span class="co">## detectors used    4 4 4 4 4 1 1 1 1    24</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Individual covariates</span></span>
<span><span class="co">##  Individual</span></span>
<span><span class="co">##  1:1       </span></span>
<span><span class="co">##  2:1</span></span></code></pre>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sdh_multi</span><span class="op">)</span></span></code></pre></div>
<p><img src="camtrapr3_files/figure-html/unnamed-chunk-33-1.png" width="700"></p>
<pre><code><span><span class="co">##  1  2 </span></span>
<span><span class="co">## 15  6</span></span></code></pre>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">secr.fit.example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/secr/man/secr.fit.html" class="external-link">secr.fit</a></span><span class="op">(</span>capthist <span class="op">=</span> <span class="va">sdh_multi</span>,</span>
<span>                               start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>   <span class="co"># with starting values, since its only very little data</span></span></code></pre></div>
<pre><code><span><span class="co">## Checking data</span></span></code></pre>
<pre><code><span><span class="co">## Warning in verify.capthist(capthist, report = 1): Levels of factor covariate(s)</span></span>
<span><span class="co">## differ between sessions - use shareFactorLevels()</span></span></code></pre>
<pre><code><span><span class="co">## Warning in secr.fit(capthist = sdh_multi, start = c(-1, -2, 10)): using default</span></span>
<span><span class="co">## buffer width 100 m</span></span></code></pre>
<pre><code><span><span class="co">## Preparing detection design matrices </span></span>
<span><span class="co">## Preparing density design matrix </span></span>
<span><span class="co">## Maximizing likelihood... </span></span>
<span><span class="co">## Eval     Loglik        D       g0    sigma </span></span>
<span><span class="co">##    1    -66.379  -1.0000  -2.0000  10.0000 </span></span>
<span><span class="co">##    2    -66.379  -1.0000  -2.0000  10.0000 </span></span>
<span><span class="co">##    3    -66.379  -1.0000  -2.0000  10.0000 </span></span>
<span><span class="co">##    4    -66.379  -1.0000  -2.0000  10.0000 </span></span>
<span><span class="co">##    5    -66.379  -1.0000  -2.0000  10.0000 </span></span>
<span><span class="co">##    6   -178.146  -1.2452 -11.9960   9.8556 </span></span>
<span><span class="co">##    7    -60.131  -1.1049  -6.2755   9.9382 </span></span>
<span><span class="co">##    8    -60.131  -1.1049  -6.2755   9.9382 </span></span>
<span><span class="co">##    9    -60.131  -1.1049  -6.2755   9.9382 </span></span>
<span><span class="co">##   10    -60.131  -1.1049  -6.2755   9.9383 </span></span>
<span><span class="co">##   11    -44.097  -0.9607  -5.3508   9.9516 </span></span>
<span><span class="co">##   12    -44.097  -0.9607  -5.3508   9.9516 </span></span>
<span><span class="co">##   13    -44.097  -0.9607  -5.3508   9.9516 </span></span>
<span><span class="co">##   14    -44.097  -0.9607  -5.3508   9.9516 </span></span>
<span><span class="co">##   15   -175.943  -0.6781  -1.0374  10.0124 </span></span>
<span><span class="co">##   16    -34.376  -0.9136  -4.6318   9.9617 </span></span>
<span><span class="co">##   17    -34.376  -0.9136  -4.6318   9.9617 </span></span>
<span><span class="co">##   18    -34.376  -0.9136  -4.6318   9.9617 </span></span>
<span><span class="co">##   19    -34.376  -0.9136  -4.6318   9.9617 </span></span>
<span><span class="co">##   20    -52.174  -1.0826  -2.2461   9.9950 </span></span>
<span><span class="co">##   21    -27.836  -0.9650  -3.9057   9.9718 </span></span>
<span><span class="co">##   22    -27.836  -0.9650  -3.9057   9.9718 </span></span>
<span><span class="co">##   23    -27.836  -0.9650  -3.9057   9.9718 </span></span>
<span><span class="co">##   24    -27.836  -0.9650  -3.9057   9.9718 </span></span>
<span><span class="co">##   25    -27.780  -1.1234  -3.2046   9.9816 </span></span>
<span><span class="co">##   26    -27.780  -1.1234  -3.2046   9.9816 </span></span>
<span><span class="co">##   27    -27.780  -1.1234  -3.2046   9.9816 </span></span>
<span><span class="co">##   28    -27.780  -1.1234  -3.2046   9.9816 </span></span>
<span><span class="co">##   29    -26.634  -1.0891  -3.5998   9.9762 </span></span>
<span><span class="co">##   30    -26.634  -1.0891  -3.5998   9.9762 </span></span>
<span><span class="co">##   31    -26.634  -1.0891  -3.5998   9.9762 </span></span>
<span><span class="co">##   32    -26.634  -1.0891  -3.5998   9.9762 </span></span>
<span><span class="co">##   33    -26.565  -1.1362  -3.5480   9.9770 </span></span>
<span><span class="co">##   34    -26.565  -1.1362  -3.5480   9.9770 </span></span>
<span><span class="co">##   35    -26.565  -1.1362  -3.5479   9.9770 </span></span>
<span><span class="co">##   36    -26.565  -1.1362  -3.5480   9.9770 </span></span>
<span><span class="co">##   37    -26.535  -1.1989  -3.5225   9.9775 </span></span>
<span><span class="co">##   38    -26.535  -1.1989  -3.5225   9.9775 </span></span>
<span><span class="co">##   39    -26.535  -1.1989  -3.5225   9.9775 </span></span>
<span><span class="co">##   40    -26.535  -1.1989  -3.5225   9.9775 </span></span>
<span><span class="co">##   41    -26.525  -1.2417  -3.5255   9.9776 </span></span>
<span><span class="co">##   42    -26.525  -1.2417  -3.5255   9.9776 </span></span>
<span><span class="co">##   43    -26.525  -1.2417  -3.5255   9.9776 </span></span>
<span><span class="co">##   44    -26.525  -1.2417  -3.5255   9.9776 </span></span>
<span><span class="co">##   45    -26.523  -1.2628  -3.5352   9.9777 </span></span>
<span><span class="co">##   46    -26.523  -1.2628  -3.5352   9.9777 </span></span>
<span><span class="co">##   47    -26.523  -1.2628  -3.5352   9.9777 </span></span>
<span><span class="co">##   48    -26.523  -1.2628  -3.5352   9.9777 </span></span>
<span><span class="co">##   49    -26.522  -1.2631  -3.5374   9.9777 </span></span>
<span><span class="co">##   50    -26.522  -1.2631  -3.5374   9.9777 </span></span>
<span><span class="co">##   51    -26.522  -1.2631  -3.5374   9.9777 </span></span>
<span><span class="co">##   52    -26.522  -1.2631  -3.5374   9.9777 </span></span>
<span><span class="co">##   53    -26.522  -1.2627  -3.5377   9.9778 </span></span>
<span><span class="co">##   54    -26.522  -1.2627  -3.5377   9.9778 </span></span>
<span><span class="co">##   55    -26.522  -1.2627  -3.5377   9.9778 </span></span>
<span><span class="co">##   56    -26.522  -1.2627  -3.5377   9.9778 </span></span>
<span><span class="co">##   57    -26.522  -1.2627  -3.5377   9.9779 </span></span>
<span><span class="co">##   58    -26.522  -1.2627  -3.5377   9.9779 </span></span>
<span><span class="co">##   59    -26.522  -1.2627  -3.5377   9.9779 </span></span>
<span><span class="co">##   60    -26.522  -1.2627  -3.5377   9.9779 </span></span>
<span><span class="co">##   61    -26.522  -1.2624  -3.5378   9.9787 </span></span>
<span><span class="co">##   62    -26.522  -1.2624  -3.5378   9.9787 </span></span>
<span><span class="co">##   63    -26.522  -1.2624  -3.5378   9.9787 </span></span>
<span><span class="co">##   64    -26.522  -1.2624  -3.5378   9.9787 </span></span>
<span><span class="co">##   65    -26.522  -1.2620  -3.5379   9.9805 </span></span>
<span><span class="co">##   66    -26.522  -1.2620  -3.5379   9.9805 </span></span>
<span><span class="co">##   67    -26.522  -1.2620  -3.5379   9.9805 </span></span>
<span><span class="co">##   68    -26.522  -1.2620  -3.5379   9.9806 </span></span>
<span><span class="co">##   69    -26.522  -1.2614  -3.5381   9.9864 </span></span>
<span><span class="co">##   70    -26.522  -1.2614  -3.5381   9.9864 </span></span>
<span><span class="co">##   71    -26.522  -1.2614  -3.5381   9.9864 </span></span>
<span><span class="co">##   72    -26.522  -1.2614  -3.5381   9.9864 </span></span>
<span><span class="co">##   73    -26.522  -1.2604  -3.5386  10.0016 </span></span>
<span><span class="co">##   74    -26.522  -1.2604  -3.5386  10.0016 </span></span>
<span><span class="co">##   75    -26.522  -1.2604  -3.5386  10.0016 </span></span>
<span><span class="co">##   76    -26.522  -1.2604  -3.5386  10.0016 </span></span>
<span><span class="co">##   77    -26.522  -1.2590  -3.5394  10.0407 </span></span>
<span><span class="co">##   78    -26.522  -1.2590  -3.5394  10.0407 </span></span>
<span><span class="co">##   79    -26.522  -1.2590  -3.5394  10.0407 </span></span>
<span><span class="co">##   80    -26.522  -1.2590  -3.5394  10.0407 </span></span>
<span><span class="co">##   81    -26.522  -1.2574  -3.5409  10.1281 </span></span>
<span><span class="co">##   82    -26.522  -1.2574  -3.5409  10.1281 </span></span>
<span><span class="co">##   83    -26.522  -1.2574  -3.5409  10.1281 </span></span>
<span><span class="co">##   84    -26.522  -1.2574  -3.5409  10.1281 </span></span>
<span><span class="co">##   85    -26.522  -1.2565  -3.5429  10.2897 </span></span>
<span><span class="co">##   86    -26.522  -1.2565  -3.5429  10.2897 </span></span>
<span><span class="co">##   87    -26.522  -1.2565  -3.5429  10.2897 </span></span>
<span><span class="co">##   88    -26.522  -1.2565  -3.5429  10.2897 </span></span>
<span><span class="co">##   89    -26.522  -1.2572  -3.5445  10.5337 </span></span>
<span><span class="co">##   90    -26.522  -1.2572  -3.5445  10.5337 </span></span>
<span><span class="co">##   91    -26.522  -1.2572  -3.5445  10.5337 </span></span>
<span><span class="co">##   92    -26.522  -1.2572  -3.5445  10.5337 </span></span>
<span><span class="co">##   93    -26.522  -1.2602  -3.5446  10.8393 </span></span>
<span><span class="co">##   94    -26.522  -1.2602  -3.5446  10.8393 </span></span>
<span><span class="co">##   95    -26.522  -1.2602  -3.5446  10.8393 </span></span>
<span><span class="co">##   96    -26.522  -1.2602  -3.5446  10.8393 </span></span>
<span><span class="co">##   97    -26.522  -1.2627  -3.5442  11.1149 </span></span>
<span><span class="co">##   98    -26.522  -1.2627  -3.5442  11.1149 </span></span>
<span><span class="co">##   99    -26.522  -1.2627  -3.5442  11.1149 </span></span>
<span><span class="co">##  100    -26.522  -1.2627  -3.5442  11.1149 </span></span>
<span><span class="co">##  101    -26.522  -1.2637  -3.5442  11.3617 </span></span>
<span><span class="co">##  102    -26.522  -1.2637  -3.5442  11.3617 </span></span>
<span><span class="co">##  103    -26.522  -1.2637  -3.5442  11.3617 </span></span>
<span><span class="co">##  104    -26.522  -1.2637  -3.5442  11.3617 </span></span>
<span><span class="co">##  105    -26.522  -1.2638  -3.5443  11.6604 </span></span>
<span><span class="co">##  106    -26.522  -1.2638  -3.5443  11.6604 </span></span>
<span><span class="co">##  107    -26.522  -1.2638  -3.5443  11.6604 </span></span>
<span><span class="co">##  108    -26.522  -1.2638  -3.5443  11.6604 </span></span>
<span><span class="co">##  109    -26.522  -1.2632  -3.5444  12.0166 </span></span>
<span><span class="co">##  110    -26.522  -1.2632  -3.5444  12.0166 </span></span>
<span><span class="co">##  111    -26.522  -1.2632  -3.5444  12.0166 </span></span>
<span><span class="co">##  112    -26.522  -1.2632  -3.5444  12.0166 </span></span>
<span><span class="co">##  113    -26.522  -1.2627  -3.5445  12.3560 </span></span>
<span><span class="co">##  114    -26.522  -1.2627  -3.5445  12.3560 </span></span>
<span><span class="co">##  115    -26.522  -1.2627  -3.5445  12.3560 </span></span>
<span><span class="co">##  116    -26.522  -1.2627  -3.5445  12.3560 </span></span>
<span><span class="co">##  117    -26.522  -1.2625  -3.5445  12.6624 </span></span>
<span><span class="co">##  118    -26.522  -1.2625  -3.5445  12.6624 </span></span>
<span><span class="co">##  119    -26.522  -1.2625  -3.5445  12.6624 </span></span>
<span><span class="co">##  120    -26.522  -1.2625  -3.5445  12.6624 </span></span>
<span><span class="co">##  121    -26.522  -1.2625  -3.5445  12.9888 </span></span>
<span><span class="co">##  122    -26.522  -1.2625  -3.5445  12.9888 </span></span>
<span><span class="co">##  123    -26.522  -1.2625  -3.5445  12.9888 </span></span>
<span><span class="co">##  124    -26.522  -1.2625  -3.5445  12.9889 </span></span>
<span><span class="co">##  125    -26.522  -1.2626  -3.5445  13.3421 </span></span>
<span><span class="co">##  126    -26.522  -1.2626  -3.5445  13.3421 </span></span>
<span><span class="co">##  127    -26.522  -1.2626  -3.5445  13.3421 </span></span>
<span><span class="co">##  128    -26.522  -1.2626  -3.5445  13.3421 </span></span>
<span><span class="co">##  129    -26.522  -1.2627  -3.5445  13.6813 </span></span>
<span><span class="co">##  130    -26.522  -1.2627  -3.5445  13.6813 </span></span>
<span><span class="co">##  131    -26.522  -1.2627  -3.5445  13.6813 </span></span>
<span><span class="co">##  132    -26.522  -1.2627  -3.5445  13.6813 </span></span>
<span><span class="co">##  133    -26.522  -1.2627  -3.5445  14.0030 </span></span>
<span><span class="co">##  134    -26.522  -1.2627  -3.5445  14.0030 </span></span>
<span><span class="co">##  135    -26.522  -1.2627  -3.5445  14.0030 </span></span>
<span><span class="co">##  136    -26.522  -1.2627  -3.5445  14.0030 </span></span>
<span><span class="co">##  137    -26.522  -1.2627  -3.5445  14.3403 </span></span>
<span><span class="co">##  138    -26.522  -1.2627  -3.5445  14.3403 </span></span>
<span><span class="co">##  139    -26.522  -1.2627  -3.5445  14.3403 </span></span>
<span><span class="co">##  140    -26.522  -1.2627  -3.5445  14.3403 </span></span>
<span><span class="co">##  141    -26.522  -1.2627  -3.5445  14.6932 </span></span>
<span><span class="co">##  142    -26.522  -1.2627  -3.5445  14.6932 </span></span>
<span><span class="co">##  143    -26.522  -1.2627  -3.5445  14.6932 </span></span>
<span><span class="co">##  144    -26.522  -1.2627  -3.5445  14.6932 </span></span>
<span><span class="co">##  145    -26.522  -1.2627  -3.5445  15.0328 </span></span>
<span><span class="co">##  146    -26.522  -1.2627  -3.5445  15.0328 </span></span>
<span><span class="co">##  147    -26.522  -1.2627  -3.5445  15.0328 </span></span>
<span><span class="co">##  148    -26.522  -1.2627  -3.5445  15.0328 </span></span>
<span><span class="co">##  149    -26.522  -1.2627  -3.5445  15.3652 </span></span>
<span><span class="co">##  150    -26.522  -1.2627  -3.5445  15.3652 </span></span>
<span><span class="co">##  151    -26.522  -1.2627  -3.5445  15.3652 </span></span>
<span><span class="co">##  152    -26.522  -1.2627  -3.5445  15.3652 </span></span>
<span><span class="co">##  153    -26.522  -1.2627  -3.5445  15.7107 </span></span>
<span><span class="co">##  154    -26.522  -1.2627  -3.5445  15.7107 </span></span>
<span><span class="co">##  155    -26.522  -1.2627  -3.5445  15.7107 </span></span>
<span><span class="co">##  156    -26.522  -1.2627  -3.5445  15.7108 </span></span>
<span><span class="co">##  157    -26.522  -1.2627  -3.5445  16.0514 </span></span>
<span><span class="co">##  158    -26.522  -1.2627  -3.5445  16.0514 </span></span>
<span><span class="co">##  159    -26.522  -1.2627  -3.5445  16.0514 </span></span>
<span><span class="co">##  160    -26.522  -1.2627  -3.5445  16.0515 </span></span>
<span><span class="co">##  161    -26.522  -1.2627  -3.5445  16.4049 </span></span>
<span><span class="co">##  162    -26.522  -1.2627  -3.5445  16.4049 </span></span>
<span><span class="co">##  163    -26.522  -1.2627  -3.5445  16.4049 </span></span>
<span><span class="co">##  164    -26.522  -1.2627  -3.5445  16.4049 </span></span>
<span><span class="co">##  165    -26.522  -1.2626  -3.5445  16.4049 </span></span>
<span><span class="co">##  166    -26.522  -1.2627  -3.5444  16.4049 </span></span>
<span><span class="co">##  167    -26.522  -1.2627  -3.5445  16.4065 </span></span>
<span><span class="co">##  168    -26.522  -1.2625  -3.5445  16.4049 </span></span>
<span><span class="co">##  169    -26.522  -1.2626  -3.5444  16.4049 </span></span>
<span><span class="co">##  170    -26.522  -1.2626  -3.5445  16.4065 </span></span>
<span><span class="co">##  171    -26.522  -1.2627  -3.5443  16.4049 </span></span>
<span><span class="co">##  172    -26.522  -1.2627  -3.5444  16.4065 </span></span>
<span><span class="co">##  173    -26.522  -1.2627  -3.5445  16.4082 </span></span>
<span><span class="co">## Completed in 48.02 seconds at 12:22:14 01 Feb 2024</span></span></code></pre>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">secr.fit.example</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $versiontime</span></span>
<span><span class="co">## [1] "4.6.4, run 12:21:26 01 Feb 2024, elapsed 48.02 s"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $capthist</span></span>
<span><span class="co">##             1 2</span></span>
<span><span class="co">## Occasions   1 1</span></span>
<span><span class="co">## Detections 15 6</span></span>
<span><span class="co">## Animals     3 2</span></span>
<span><span class="co">## Detectors   3 4</span></span>
<span><span class="co">## Moves       5 2</span></span>
<span><span class="co">## Animals2    3 2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $trapsummary</span></span>
<span><span class="co">## $trapsummary$`1`</span></span>
<span><span class="co">## Object class       traps </span></span>
<span><span class="co">## Detector type      count </span></span>
<span><span class="co">## Detector number    3 </span></span>
<span><span class="co">## Average spacing    2258.871 m </span></span>
<span><span class="co">## x-range            523000 526000 m </span></span>
<span><span class="co">## y-range            604000 607050 m </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Usage range by occasion</span></span>
<span><span class="co">##        1</span></span>
<span><span class="co">## min 37.5</span></span>
<span><span class="co">## max 43.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $trapsummary$`2`</span></span>
<span><span class="co">## Object class       traps </span></span>
<span><span class="co">## Detector type      count </span></span>
<span><span class="co">## Detector number    4 </span></span>
<span><span class="co">## Average spacing    2258.871 m </span></span>
<span><span class="co">## x-range            523000 526000 m </span></span>
<span><span class="co">## y-range            604000 607050 m </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##  Usage range by occasion</span></span>
<span><span class="co">##        1</span></span>
<span><span class="co">## min 37.5</span></span>
<span><span class="co">## max 63.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $detector</span></span>
<span><span class="co">##       1       2 </span></span>
<span><span class="co">## "count" "count" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $countmodel</span></span>
<span><span class="co">## [1] "Binomial, size from usage"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $mask</span></span>
<span><span class="co">##   Cells Spacing Area</span></span>
<span><span class="co">## 1    36      50    9</span></span>
<span><span class="co">## 2    36      50    9</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $modeldetails</span></span>
<span><span class="co">##     CL fixed distribution hcov</span></span>
<span><span class="co">##  FALSE  none      poisson     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $AICtable</span></span>
<span><span class="co">##             model   detectfn npar    logLik    AIC   AICc</span></span>
<span><span class="co">##  D~1 g0~1 sigma~1 halfnormal    3 -26.52162 59.043 83.043</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $coef</span></span>
<span><span class="co">##            beta      SE.beta       lcl        ucl</span></span>
<span><span class="co">## D     -1.262694 4.474596e-01 -2.139699 -0.3856896</span></span>
<span><span class="co">## g0    -3.544483 2.287552e-01 -3.992835 -3.0961309</span></span>
<span><span class="co">## sigma 16.404893 9.060396e-09 16.404893 16.4048927</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $predicted</span></span>
<span><span class="co">## $predicted$`session = 1`</span></span>
<span><span class="co">##        link     estimate SE.estimate          lcl          ucl</span></span>
<span><span class="co">## D       log 2.828908e-01 0.133190691 1.176903e-01 6.799816e-01</span></span>
<span><span class="co">## g0    logit 2.807271e-02 0.006241503 1.811320e-02 4.326713e-02</span></span>
<span><span class="co">## sigma   log 1.332154e+07 0.000000000 1.332154e+07 1.332154e+07</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $predicted$`session = 2`</span></span>
<span><span class="co">##        link     estimate SE.estimate          lcl          ucl</span></span>
<span><span class="co">## D       log 2.828908e-01 0.133190691 1.176903e-01 6.799816e-01</span></span>
<span><span class="co">## g0    logit 2.807271e-02 0.006241503 1.811320e-02 4.326713e-02</span></span>
<span><span class="co">## sigma   log 1.332154e+07 0.000000000 1.332154e+07 1.332154e+07</span></span></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
