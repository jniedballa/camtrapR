<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Species detection histories for occupancy analyses — detectionHistory • camtrapR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Species detection histories for occupancy analyses — detectionHistory"><meta property="og:description" content="This function generates species detection histories that can be used in
occupancy analyses, e.g. with package
unmarked. It generates detection histories
in different formats, with adjustable occasion length and occasion start
time."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
    <li>
      <a href="../articles/camtrapr5.html">5. Multi-species occupancy models</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jniedballa/camtrapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Species detection histories for occupancy analyses</h1>
    <small class="dont-index">Source: <a href="https://github.com/jniedballa/camtrapR/blob/HEAD/R/detectionHistory.R" class="external-link"><code>R/detectionHistory.R</code></a></small>
    <div class="hidden name"><code>detectionHistory.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function generates species detection histories that can be used in
occupancy analyses, e.g. with package
<a href="https://rbchan.github.io/unmarked/reference/unmarked-package.html" class="external-link">unmarked</a>. It generates detection histories
in different formats, with adjustable occasion length and occasion start
time.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">detectionHistory</span><span class="op">(</span></span>
<span>  <span class="va">recordTable</span>,</span>
<span>  <span class="va">species</span>,</span>
<span>  <span class="va">camOp</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binary"</span>, <span class="st">"count"</span><span class="op">)</span>,</span>
<span>  stationCol <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>  speciesCol <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>  recordDateTimeCol <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>  recordDateTimeFormat <span class="op">=</span> <span class="st">"ymd HMS"</span>,</span>
<span>  <span class="va">occasionLength</span>,</span>
<span>  <span class="va">minActiveDaysPerOccasion</span>,</span>
<span>  <span class="va">maxNumberDays</span>,</span>
<span>  <span class="va">day1</span>,</span>
<span>  <span class="va">buffer</span>,</span>
<span>  includeEffort <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scaleEffort <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  occasionStartTime <span class="op">=</span> <span class="st">"deprecated"</span>,</span>
<span>  datesAsOccasionNames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">timeZone</span>,</span>
<span>  writecsv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">outDir</span>,</span>
<span>  <span class="va">unmarkedMultFrameInput</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>recordTable</dt>
<dd><p>data.frame. the record table created by
<code><a href="recordTable.html">recordTable</a></code></p></dd>


<dt>species</dt>
<dd><p>character. the species for which to compute the detection
history</p></dd>


<dt>camOp</dt>
<dd><p>The camera operability matrix as created by
<code><a href="cameraOperation.html">cameraOperation</a></code></p></dd>


<dt>output</dt>
<dd><p>character. Return binary detections ("binary") or counts of
detections ("count")</p></dd>


<dt>stationCol</dt>
<dd><p>character. name of the column specifying Station ID in
<code>recordTable</code></p></dd>


<dt>speciesCol</dt>
<dd><p>character. name of the column specifying species in
<code>recordTable</code></p></dd>


<dt>recordDateTimeCol</dt>
<dd><p>character. name of the column specifying date and
time in <code>recordTable</code></p></dd>


<dt>recordDateTimeFormat</dt>
<dd><p>character. Format of column
<code>recordDateTimeCol</code> in <code>recordTable</code></p></dd>


<dt>occasionLength</dt>
<dd><p>integer. occasion length in days</p></dd>


<dt>minActiveDaysPerOccasion</dt>
<dd><p>integer. minimum number of active trap days
for occasions to be included (optional)</p></dd>


<dt>maxNumberDays</dt>
<dd><p>integer. maximum number of trap days per station
(optional)</p></dd>


<dt>day1</dt>
<dd><p>character. When should occasions begin: station setup date
("station"), first day of survey ("survey"), a specific date (e.g.
"2015-12-31")?</p></dd>


<dt>buffer</dt>
<dd><p>integer. Makes the first occasion begin a number of days after
station setup. (optional)</p></dd>


<dt>includeEffort</dt>
<dd><p>logical. Compute trapping effort (number of active
camera trap days per station and occasion)?</p></dd>


<dt>scaleEffort</dt>
<dd><p>logical. scale and center effort matrix to mean = 0 and
sd = 1?</p></dd>


<dt>occasionStartTime</dt>
<dd><p>(DEPRECATED) integer. time of day (the full hour)
at which to begin occasions. Please use argument <code>occasionStartTime</code> in
<code><a href="cameraOperation.html">cameraOperation</a></code> instead.</p></dd>


<dt>datesAsOccasionNames</dt>
<dd><p>If <code>day1 = "survey"</code>, occasion names in the
detection history will be composed of first and last day of that occasion.</p></dd>


<dt>timeZone</dt>
<dd><p>character. Must be a value returned by
<code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">OlsonNames</a></code></p></dd>


<dt>writecsv</dt>
<dd><p>logical. Should the detection history be saved as a .csv?</p></dd>


<dt>outDir</dt>
<dd><p>character. Directory into which detection history .csv file is
saved</p></dd>


<dt>unmarkedMultFrameInput</dt>
<dd><p>logical. Return input for multi-season
occupancy models in unmarked (argument "y" in
<code><a href="https://rbchan.github.io/unmarked/reference/unmarkedMultFrame.html" class="external-link">unmarkedMultFrame</a></code>?</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Depending on the value of <code>includeEffort</code> and
<code>scaleEffort</code>, a list with either 1, 2 or 3 elements. The first element
is the species detection history. The second is the optional effort matrix
and the third contains the effort scaling parameters.</p>
<dl><dt>detection_history</dt>
<dd><p>A species detection matrix</p></dd>
 <dt>effort</dt>
<dd><p>A matrix
giving the number of active camera trap days per station and occasion (=
camera trapping effort). It is only returned if <code>includeEffort = TRUE</code></p></dd>

<dt>effort_scaling_parameters</dt>
<dd><p>Scaling parameters of the effort matrix. It
is only returned if <code>includeEffort</code> and <code>scaleEffort</code> are
<code>TRUE</code></p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The function computes a species detection matrix, either as a
detection-by-date or a detection-by-occasion matrix. <code>day1</code> defines if
each stations detection history will begin on that station's setup day
(<code>day1 = "station"</code>) or if all station's detection histories have a
common origin (the day the first station was set up if <code>day1 =
"survey"</code> or a fixed date if, e.g. <code>day1 = "2015-12-31"</code>). If
<code>day1</code> is a date, <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code> must be able to
understand it. The most suitable format is "YYYY-MM-DD", e.g. "2015-12-31".</p>
<p><code>output</code> is analogous to <code><a href="spatialDetectionHistory.html">spatialDetectionHistory</a></code>. It
makes the function return either counts of detections during occasions, or a
binary indicator for whether the species was detected.</p>
<p><code>includeEffort</code> controls whether an additional effort matrix is
computed or not. This also affects the detection matrices. If
<code>includeEffort = FALSE</code>, all occasions in which a station was not set
up or malfunctioning (NA or 0 in <code>camOp</code>) will result in NAs in the
detection history. If <code>includeEffort = TRUE</code>, the record history will
only contain 0 and 1, and no NAs. The effort matrix can then be included in
occupancy models as a (continuous) observation covariate to estimate the
effect of effort on detection probability.</p>
<p>The number of days that are aggregated is controlled by
<code>occasionLength</code>. <code>occasionStartTime</code> will be removed from the
function. It has moved to <code><a href="cameraOperation.html">cameraOperation</a></code>, to ensure daily
effort is computed correctly and takes the occasion start time into account.
<!-- %can be used to make occasions begin another hour than midnight (the -->
default). This may be relevant for nocturnal animals, in which 1 whole night
would be considered an occasion.</p>
<p>The values of <code>stationCol</code> in <code>recordTable</code> must be matched by the
row names of <code>camOp</code> (case-insensitive), otherwise an error is raised.</p>
<p><code>recordDateTimeFormat</code> defaults to the "YYYY-MM-DD HH:MM:SS"
convention, e.g. "2014-09-30 22:59:59". <code>recordDateTimeFormat</code> can be
interpreted either by base-R via <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code> or in
<span class="pkg">lubridate</span> via <code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">parse_date_time</a></code> (argument
"orders"). <span class="pkg">lubridate</span> will be used if there are no "%" characters in
<code>recordDateTimeFormat</code>.</p>
<p>For "YYYY-MM-DD HH:MM:SS", <code>recordDateTimeFormat</code> would be either
"%Y-%m-%d %H:%M:%S" or "ymd HMS". For details on how to specify date
and time formats in R see <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code> or
<code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">parse_date_time</a></code>.</p>
<p>If the camera operation matrix (<code>camOp</code>) was created for a multi-season
study (argument <code>sesssionCol</code> in <code><a href="cameraOperation.html">cameraOperation</a></code> was set,
it will be detected automatically. Output can be for unmarkedMultFrame by
setting <code>unmarkedMultFrameInput = TRUE</code>. Each row corresponds to a
site, and the columns are in season-major, occasion-minor order, e.g.
season1-occasion1, season1-occasion2, etc.).</p>
    </div>
    <div id="warning">
    <h2>Warning</h2>
    <p>Setting <code>output = "count"</code> returns a count of
detections, not individuals. We strongly advise against using it as input
for models of animal abundance (such as N-Mixture models) models which use
counts as input.</p>
<p>Please note the section about defining argument <code>timeZone</code> in the
vignette on data extraction (accessible via
<code>vignette("DataExtraction")</code> or online
(<a href="https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf" class="external-link">https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf</a>)).</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Juergen Niedballa</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define image directory</span></span></span>
<span class="r-in"><span><span class="va">wd_images_ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load station information</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtraps</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create camera operation matrix</span></span></span>
<span class="r-in"><span><span class="va">camop_no_problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps</span>,</span></span>
<span class="r-in"><span>                                    stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                                    setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span></span>
<span class="r-in"><span>                                    retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span></span>
<span class="r-in"><span>                                    hasProblems  <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                    dateFormat   <span class="op">=</span> <span class="st">"dmy"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"exiftool"</span><span class="op">)</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span><span class="op">{</span>        <span class="co"># only run this function if ExifTool is available</span></span></span>
<span class="r-in"><span><span class="va">recordTableSample</span> <span class="op">&lt;-</span> <span class="fu"><a href="recordTable.html">recordTable</a></span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID</span>,</span></span>
<span class="r-in"><span>                                 IDfrom              <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                                 minDeltaTime        <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>                                 deltaTimeComparedTo <span class="op">=</span> <span class="st">"lastRecord"</span>,</span></span>
<span class="r-in"><span>                                 exclude             <span class="op">=</span> <span class="st">"UNID"</span>,</span></span>
<span class="r-in"><span>                                 timeZone            <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableSample</span><span class="op">)</span>    <span class="co"># load the record history, as created above</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute detection history for a species</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># without trapping effort</span></span></span>
<span class="r-in"><span><span class="va">DetHist1</span> <span class="op">&lt;-</span> <span class="fu">detectionHistory</span><span class="op">(</span>recordTable         <span class="op">=</span> <span class="va">recordTableSample</span>,</span></span>
<span class="r-in"><span>                            camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span></span>
<span class="r-in"><span>                            stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                            speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                            recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                            species              <span class="op">=</span> <span class="st">"VTA"</span>,</span></span>
<span class="r-in"><span>                            occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                            day1                 <span class="op">=</span> <span class="st">"station"</span>,</span></span>
<span class="r-in"><span>                            datesAsOccasionNames <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                            includeEffort        <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                            timeZone             <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">DetHist1</span>                     <span class="co"># this is a list with 1 element</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $detection_history</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          o1 o2 o3 o4 o5 o6 o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA  0  1  0  0  1  0 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB  0  1  0  1  0  0 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC  0  0  1  0  0  0 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">DetHist1</span><span class="op">$</span><span class="va">detection_history</span>   <span class="co"># this is the contained detection/non-detection matrix</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          o1 o2 o3 o4 o5 o6 o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA  0  1  0  0  1  0 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB  0  1  0  1  0  0 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC  0  0  1  0  0  0 NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with effort / using base R to define recordDateTimeFormat</span></span></span>
<span class="r-in"><span><span class="va">DetHist2</span> <span class="op">&lt;-</span> <span class="fu">detectionHistory</span><span class="op">(</span>recordTable          <span class="op">=</span> <span class="va">recordTableSample</span>,</span></span>
<span class="r-in"><span>                             camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span></span>
<span class="r-in"><span>                             stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                             speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                             recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                             species              <span class="op">=</span> <span class="st">"VTA"</span>,</span></span>
<span class="r-in"><span>                             occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                             day1                 <span class="op">=</span> <span class="st">"station"</span>,</span></span>
<span class="r-in"><span>                             datesAsOccasionNames <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                             includeEffort        <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                             scaleEffort          <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                             timeZone             <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">DetHist2</span><span class="op">$</span><span class="va">detection_history</span>  <span class="co"># detection history  (alternatively, use: DetHist2[[1]])</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          o1 o2 o3 o4 o5 o6 o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA  0  1  0  0  1  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB  0  1  0  1  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC  0  0  1  0  0  0  0</span>
<span class="r-in"><span><span class="va">DetHist2</span><span class="op">$</span><span class="va">effort</span>             <span class="co"># effort (alternatively, use: DetHist2[[2]])</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           o1 o2 o3 o4 o5 o6  o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA 6.5  7  7  7  7  7 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB 6.5  7  7  7  7  7 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC 6.5  7  7  7  7  7 1.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with effort / using lubridate package to define recordDateTimeFormat</span></span></span>
<span class="r-in"><span><span class="va">DetHist2_lub</span> <span class="op">&lt;-</span> <span class="fu">detectionHistory</span><span class="op">(</span>recordTable          <span class="op">=</span> <span class="va">recordTableSample</span>,</span></span>
<span class="r-in"><span>                                 camOp                <span class="op">=</span> <span class="va">camop_no_problem</span>,</span></span>
<span class="r-in"><span>                                 stationCol           <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                                 speciesCol           <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                                 recordDateTimeCol    <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                                 recordDateTimeFormat <span class="op">=</span> <span class="st">"ymd HMS"</span>,</span></span>
<span class="r-in"><span>                                 species              <span class="op">=</span> <span class="st">"VTA"</span>,</span></span>
<span class="r-in"><span>                                 occasionLength       <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                                 day1                 <span class="op">=</span> <span class="st">"station"</span>,</span></span>
<span class="r-in"><span>                                 datesAsOccasionNames <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                 includeEffort        <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                 scaleEffort          <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                 timeZone             <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span></span>
<span class="r-in"><span><span class="op">)</span>    </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">DetHist2_lub</span><span class="op">$</span><span class="va">detection_history</span>  <span class="co"># detection history  (alternatively, use: DetHist2_lub[[1]])</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          o1 o2 o3 o4 o5 o6 o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA  0  1  0  0  1  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB  0  1  0  1  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC  0  0  1  0  0  0  0</span>
<span class="r-in"><span><span class="va">DetHist2_lub</span><span class="op">$</span><span class="va">effort</span>             <span class="co"># effort (alternatively, use: DetHist2_lub[[2]])</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           o1 o2 o3 o4 o5 o6  o7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA 6.5  7  7  7  7  7 0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB 6.5  7  7  7  7  7 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC 6.5  7  7  7  7  7 1.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multi-season detection history</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load multi-season data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableSampleMultiSeason</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multi-season camera operation matrix</span></span></span>
<span class="r-in"><span><span class="va">camop_season</span> <span class="op">&lt;-</span> <span class="fu"><a href="cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable          <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span></span>
<span class="r-in"><span>                                    stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                                    setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span></span>
<span class="r-in"><span>                                    sessionCol   <span class="op">=</span> <span class="st">"session"</span>,</span></span>
<span class="r-in"><span>                                    retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span></span>
<span class="r-in"><span>                                    hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                    dateFormat   <span class="op">=</span> <span class="st">"dmy"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multi-season detection history</span></span></span>
<span class="r-in"><span><span class="va">DetHist_multi</span> <span class="op">&lt;-</span> <span class="fu">detectionHistory</span><span class="op">(</span>recordTable      <span class="op">=</span> <span class="va">recordTableSampleMultiSeason</span>,</span></span>
<span class="r-in"><span>                            camOp                  <span class="op">=</span> <span class="va">camop_season</span>,</span></span>
<span class="r-in"><span>                            stationCol             <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                            speciesCol             <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                            species                <span class="op">=</span> <span class="st">"VTA"</span>,</span></span>
<span class="r-in"><span>                            occasionLength         <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                            day1                   <span class="op">=</span> <span class="st">"station"</span>,</span></span>
<span class="r-in"><span>                            recordDateTimeCol      <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                            includeEffort          <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                            scaleEffort            <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                            timeZone               <span class="op">=</span> <span class="st">"UTC"</span>,</span></span>
<span class="r-in"><span>                            unmarkedMultFrameInput <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">DetHist_multi</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $detection_history</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          o1 o2 o3 o4 o5 o6 o7 o8 o1 o2 o3 o4 o5 o6 o7 o8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA  1  0  0  1  0 NA NA NA  1  0  0  1  0 NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB  0  1  1  0  0 NA NA NA  0  1  1  0  0 NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC  0  0  1  0 NA NA NA NA  0  0  1  0 NA NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationD NA NA NA NA NA NA NA NA  0  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $effort</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           o1 o2 o3 o4  o5 o6 o7 o8  o1 o2 o3 o4  o5 o6 o7  o8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationA 9.5 10 10 10 2.5 NA NA NA 9.5 10 10 10 2.5 NA NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationB 9.5 10 10 10 3.5 NA NA NA 9.5 10 10 10 3.5 NA NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationC 9.5 10 10  8  NA NA NA NA 9.5 10 10  8  NA NA NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> StationD  NA NA NA NA  NA NA NA NA 9.5 10 10 10 6.0  3 10 4.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

