<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a species record table from camera trap images and videos — recordTable • camtrapR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a species record table from camera trap images and videos — recordTable"><meta property="og:description" content="Generates a record table from camera trap images or videos. Images/videos
must be sorted into station directories at least. The function can read
species identification from a directory structure (Station/Species or
Station/Camera/Species) or from image metadata tags."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
    <li>
      <a href="../articles/camtrapr5.html">5. Multi-species occupancy models</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jniedballa/camtrapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a species record table from camera trap images and videos</h1>
    <small class="dont-index">Source: <a href="https://github.com/jniedballa/camtrapR/blob/HEAD/R/recordTable.R" class="external-link"><code>R/recordTable.R</code></a></small>
    <div class="hidden name"><code>recordTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates a record table from camera trap images or videos. Images/videos
must be sorted into station directories at least. The function can read
species identification from a directory structure (Station/Species or
Station/Camera/Species) or from image metadata tags.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">recordTable</span><span class="op">(</span></span>
<span>  <span class="va">inDir</span>,</span>
<span>  <span class="va">IDfrom</span>,</span>
<span>  <span class="va">cameraID</span>,</span>
<span>  <span class="va">camerasIndependent</span>,</span>
<span>  <span class="va">exclude</span>,</span>
<span>  minDeltaTime <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">deltaTimeComparedTo</span>,</span>
<span>  <span class="va">timeZone</span>,</span>
<span>  <span class="va">stationCol</span>,</span>
<span>  writecsv <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">outDir</span>,</span>
<span>  metadataHierarchyDelimitor <span class="op">=</span> <span class="st">"|"</span>,</span>
<span>  <span class="va">metadataSpeciesTag</span>,</span>
<span>  <span class="va">additionalMetadataTags</span>,</span>
<span>  removeDuplicateRecords <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  returnFileNamesMissingTags <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">eventSummaryColumn</span>,</span>
<span>  <span class="va">eventSummaryFunction</span>,</span>
<span>  <span class="va">video</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>inDir</dt>
<dd><p>character. Directory containing station directories. It must
either contain images in species subdirectories (e.g.
inDir/StationA/SpeciesA) or images with species metadata tags (without
species directories, e.g. inDir/StationA).</p></dd>


<dt>IDfrom</dt>
<dd><p>character. Read species ID from image metadata ("metadata") of
from species directory names ("directory")?</p></dd>


<dt>cameraID</dt>
<dd><p>character. Where should the function look for camera IDs:
'filename', 'directory'. 'filename' requires images renamed with
<code><a href="imageRename.html">imageRename</a></code>. 'directory' requires a camera subdirectory within
station directories (station/camera/species). Can be missing.</p></dd>


<dt>camerasIndependent</dt>
<dd><p>logical. If <code>TRUE</code>, species records are
considered to be independent between cameras at a station.</p></dd>


<dt>exclude</dt>
<dd><p>character. Vector of species names to be excluded from the
record table</p></dd>


<dt>minDeltaTime</dt>
<dd><p>integer. Time difference between records of the same
species at the same station to be considered independent (in minutes)</p></dd>


<dt>deltaTimeComparedTo</dt>
<dd><p>character. For two records to be considered
independent, must the second one be at least <code>minDeltaTime</code> minutes
after the last independent record of the same species
(<code>"lastIndependentRecord"</code>), or <code>minDeltaTime</code> minutes after the
last record (<code>"lastRecord"</code>)?</p></dd>


<dt>timeZone</dt>
<dd><p>character. Must be a value returned by
<code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">OlsonNames</a></code></p></dd>


<dt>stationCol</dt>
<dd><p>character. Name of the camera trap station column.
Assuming "Station" if undefined.</p></dd>


<dt>writecsv</dt>
<dd><p>logical. Should the record table be saved as a .csv?</p></dd>


<dt>outDir</dt>
<dd><p>character. Directory to save csv to. If NULL and
<code>writecsv = TRUE</code>, recordTable will be written to <code>inDir</code>.</p></dd>


<dt>metadataHierarchyDelimitor</dt>
<dd><p>character. The character delimiting
hierarchy levels in image metadata tags in field "HierarchicalSubject".
Either "|" or ":".</p></dd>


<dt>metadataSpeciesTag</dt>
<dd><p>character. In custom image metadata, the species
ID tag name.</p></dd>


<dt>additionalMetadataTags</dt>
<dd><p>character. Additional camera model-specific
metadata tags to be extracted. (If possible specify tag groups as returned
by <code><a href="exifTagNames.html">exifTagNames</a></code>)</p></dd>


<dt>removeDuplicateRecords</dt>
<dd><p>logical. If there are several records of the
same species at the same station (also same camera if cameraID is defined)
at exactly the same time, show only one?</p></dd>


<dt>returnFileNamesMissingTags</dt>
<dd><p>logical. If species are assigned with
metadata and images are not tagged, return a few file names of these images
as a message?</p></dd>


<dt>eventSummaryColumn</dt>
<dd><p>character. A column in the record table (e.g. from
a metadata tag) by to summarise non-independent records (those within
<code>minDeltaTime</code> of a given record) with a user-defined function
(<code>eventSummaryFunction</code>)</p></dd>


<dt>eventSummaryFunction</dt>
<dd><p>character. The function by which to summarise
<code>eventSummaryColumn</code> of non-independent records, e.g. "sum", "max"
(optional)</p></dd>


<dt>video</dt>
<dd><p>list. Contains information on how to handle video data
(optional). See details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame containing species records and additional information
about stations, date, time and (optionally) further metadata.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The function can handle a number of different ways of storing images, and
supports species identification by moving images into species directories as
well as metadata tagging. In every case, images need to be stored into
station directories. If images are identified by moving them into species
directories, a camera directory is optional: "Station/Species/XY.JPG" or
"Station/Camera/Species/XY.JPG". Likewise, if images are identified using
metadata tagging, a camera directory can be used optionally:
"Station/XY.JPG" or "Station/Camera/XY.JPG".</p>
<p>If images are identified by metadata tagging, <code>metadataSpeciesTag</code>
specifies the metadata tag group name that contains species identification
tags. <code>metadataHierarchyDelimitor</code> is "|" for images tagged in DigiKam
and images tagged in Adobe Bridge / Lightroom with the default settings. It
is only necessary to change it if the default was changed in these programs.</p>
<p><code>minDeltaTime</code> is a criterion for temporal independence of species
recorded at the same station. Setting it to 0 will make the function return
all records. Setting it to a higher value will remove records that were
taken less than <code>minDeltaTime</code> minutes after the last record
(<code>deltaTimeComparedTo = "lastRecord"</code>) or the last independent record
(<code>deltaTimeComparedTo = "lastIndependentRecord"</code>).</p>
<p><code>removeDuplicateRecords</code> determines whether duplicate records
(identical station, species, date/time, (and camera if applicable)) are
all returned (FALSE) or collapsed into a single unique record (TRUE).</p>
<p><code>camerasIndependent</code> defines if the cameras at a station are to be
considered independent. If <code>TRUE</code>, records of the same species taken by
different cameras are considered independent (e.g. if they face different
trails). Use <code>FALSE</code> if both cameras face each other and possibly
<code>TRUE</code> ).</p>
<p><code>exclude</code> can be used to exclude "species" directories containing
irrelevant images (e.g. "team", "blank", "unidentified"). <code>stationCol</code>
can be set to match the station column name in the camera trap station table
(see <code><a href="camtraps.html">camtraps</a></code>).</p>
<p>Many digital images contain Exif metadata tags such as "AmbientTemperature"
or "MoonPhase" that can be extracted if specified in <code>metadataTags</code>.
Because these are manufacturer-specific and not standardized, function
<code><a href="exifTagNames.html">exifTagNames</a></code> provides a vector of all available tag names.
Multiple names can be specified as a character vector as: <code>c(Tag1,
Tag2, ...)</code>. The metadata tags thus extracted may be used as covariates in
modelling species distributions.</p>
<p><code>eventSummaryColumn</code> and <code>eventSummaryFunction</code> can be used to
extract summary statistics for independent sampling events. For example, you
assigned a "count" tag to your images, indicating the number of individuals
in a picture. In a sequence of pictures taken within 1 minute, most pictures
show one individual, but one image shows two individuals. You tagged the
images accordingly (count = 1 or count = 2) and run <code>recordTable</code>. Set
<code>eventSummaryColumn = "count"</code> and <code>eventSummaryFunction = "max"</code>
to obtain the maximum number of <code>count</code> in all images within
<code>minDeltaTime</code> minutes of a given record. The results is in a new
column, in this example <code>count_max</code>. You can also calculate several
statistics at the same time, by supplying vectors of values, e.g.
<code>eventSummaryColumn = c("count", "count", "camera")</code> and
<code>eventSummaryFunction = c("min", "max", "unique")</code> to get minimum and
maximum count and all unique camera IDs for that event. Note that
<code>eventSummaryColumn</code> and <code>eventSummaryFunction</code> must be of same
length.</p>
<p>Argument <code>video</code> is a named list with 2 or 4 items. 2 items
(<code>file_formats</code>, <code>dateTimeTag</code>) are always required, and are
sufficent if <code>IDfrom = "directory"</code>. In that case, no digiKam tags will
be returned.  To return digiKam tags, two additional items are required
(<code>db_directory</code>, <code>db_filename</code>). This is essential when using
<code>IDfrom = "metadata"</code>. When using <code>IDfrom = "directory"</code>, it is
optional, but allows to extract metadata tags assigned to videos in digiKam.
This workaround is necessary because digiKam tags are not written into video
metadata, but are only saved in the digiKam database. So in contrast to JPG
images, they can not be extracted with ExifTool. It also requires that
<code>inDir</code> is in your digiKam database.</p>
<p>The items of argument <code>video</code> are:</p>
<table class="table table"><tr><td><code>file_formats</code></td><td>The video formats to extract (include
"jpg" if you want .JPG image metadata)</td></tr><tr><td><code>dateTimeTag</code></td><td>the
metadata tag to extract date/time from (use <code><a href="exifTagNames.html">exifTagNames</a></code> to
find out which tag is suitable)</td></tr><tr><td><code>db_directory</code></td><td>The directory
containing digiKam database (optional if <code>IDfrom = "directory"</code>)</td></tr><tr><td><code>db_filename</code></td><td>The digiKam database file in <code>db_directory</code>
(optional if <code>IDfrom = "directory"</code>)</td></tr></table><p>See the examples below for for how to specify the argument <code>video</code>.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The results of a number of other function will depend on the output of
this function (namely on the arguments <code>exclude</code> for excluding species
and <code>minDeltaTime</code>/ <code>deltaTimeComparedTo</code> for temporal
independence):</p>
<table class="table table"><tr><td><code><a href="detectionMaps.html">detectionMaps</a></code></td></tr><tr><td><code><a href="detectionHistory.html">detectionHistory</a></code></td></tr><tr><td><code><a href="activityHistogram.html">activityHistogram</a></code></td></tr><tr><td><code><a href="activityDensity.html">activityDensity</a></code></td></tr><tr><td><code><a href="activityRadial.html">activityRadial</a></code></td></tr><tr><td><code><a href="activityOverlap.html">activityOverlap</a></code></td></tr><tr><td><code><a href="activityHistogram.html">activityHistogram</a></code></td></tr><tr><td><code><a href="surveyReport.html">surveyReport</a></code></td></tr><tr><td></td></tr></table></div>
    <div id="warning-">
    <h2>Warning </h2>
    <p>Custom image metadata must be organised hierarchically
(tag group - tag; e.g. "Species" - "Leopard Cat"). Detailed information on
how to set up and use metadata tags can be found in
<a href="https://CRAN.R-project.org/package=camtrapR/vignettes/camtrapr2.pdf" class="external-link">vignette
2: Species and Individual Identification</a>.</p>
<p>Custom image metadata tags must be written to the images. The function
cannot read tags from .xmp sidecar files. Make sure you set the preferences
accordingly. In DigiKam, go to Settings/Configure digiKam/Metadata. There,
make sure "Write to sidecar files" is unchecked.</p>
<p>Please note the section about defining argument <code>timeZone</code> in the
vignette on data extraction (accessible via
<code>vignette("DataExtraction")</code> or online
(<a href="https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf" class="external-link">https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf</a>)).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Phil Harvey's ExifTool <a href="https://exiftool.org/" class="external-link">https://exiftool.org/</a></p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Juergen Niedballa</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>    <span class="co"># the examples take too long to pass CRAN tests</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set directory with camera trap images in station directories</span></span></span>
<span class="r-in"><span><span class="va">wd_images_ID_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_dir"</span>, </span></span>
<span class="r-in"><span>                                    package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"exiftool"</span><span class="op">)</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span><span class="op">{</span>        <span class="co"># only run these examples if ExifTool is available</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table1</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                       IDfrom                 <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                       minDeltaTime           <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>                       deltaTimeComparedTo    <span class="op">=</span> <span class="st">"lastRecord"</span>,</span></span>
<span class="r-in"><span>                       writecsv               <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       additionalMetadataTags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXIF:Model"</span>, <span class="st">"EXIF:Make"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># note argument additionalMetadataTags: it contains tag names as returned by function exifTagNames</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table2</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                       IDfrom                 <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                       minDeltaTime           <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>                       deltaTimeComparedTo    <span class="op">=</span> <span class="st">"lastRecord"</span>,</span></span>
<span class="r-in"><span>                       exclude                <span class="op">=</span> <span class="st">"UNID"</span>,</span></span>
<span class="r-in"><span>                       writecsv               <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       timeZone               <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span></span>
<span class="r-in"><span>                       additionalMetadataTags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EXIF:Model"</span>, <span class="st">"EXIF:Make"</span>, <span class="st">"NonExistingTag"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       eventSummaryColumn     <span class="op">=</span> <span class="st">"EXIF:Make"</span>,</span></span>
<span class="r-in"><span>                       eventSummaryFunction   <span class="op">=</span> <span class="st">"unique"</span></span></span>
<span class="r-in"><span>                       <span class="op">)</span></span></span>
<span class="r-in"><span>                       </span></span>
<span class="r-in"><span><span class="co"># note the warning that the last tag in "additionalMetadataTags" ("NonExistingTag") was not found</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">rec_table1</span><span class="op">$</span><span class="va">Species</span> <span class="op">==</span> <span class="st">"UNID"</span><span class="op">)</span>    <span class="co"># TRUE</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">rec_table2</span><span class="op">$</span><span class="va">Species</span> <span class="op">==</span> <span class="st">"UNID"</span><span class="op">)</span>    <span class="co"># FALSE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># here's how the removeDuplicateRecords argument works</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table3a</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir              <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                       IDfrom                 <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                       minDeltaTime           <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                       exclude                <span class="op">=</span> <span class="st">"UNID"</span>,</span></span>
<span class="r-in"><span>                       timeZone               <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span></span>
<span class="r-in"><span>                       removeDuplicateRecords <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table3b</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir              <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                       IDfrom                 <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                       minDeltaTime           <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                       exclude                <span class="op">=</span> <span class="st">"UNID"</span>,</span></span>
<span class="r-in"><span>                       timeZone               <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span></span>
<span class="r-in"><span>                       removeDuplicateRecords <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">anyDuplicated</a></span><span class="op">(</span><span class="va">rec_table3a</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Station"</span>, <span class="st">"Species"</span>, <span class="st">"DateTimeOriginal"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>   <span class="co"># got duplicates</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">anyDuplicated</a></span><span class="op">(</span><span class="va">rec_table3b</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Station"</span>, <span class="st">"Species"</span>, <span class="st">"DateTimeOriginal"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>   <span class="co"># no duplicates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># after removing duplicates, both are identical:</span></span></span>
<span class="r-in"><span><span class="va">whichAreDuplicated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">rec_table3a</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Station"</span>, <span class="st">"Species"</span>, <span class="st">"DateTimeOriginal"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">rec_table3a</span><span class="op">[</span><span class="op">-</span><span class="va">whichAreDuplicated</span>,<span class="op">]</span> <span class="op">==</span> <span class="va">rec_table3b</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### extracting species IDs from metadata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wd_images_ID_species_tagged</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"pictures/sample_images_species_tag"</span>, </span></span>
<span class="r-in"><span>                                           package <span class="op">=</span> <span class="st">"camtrapR"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table4</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir               <span class="op">=</span> <span class="va">wd_images_ID_species_tagged</span>,</span></span>
<span class="r-in"><span>                       IDfrom                 <span class="op">=</span> <span class="st">"metadata"</span>,</span></span>
<span class="r-in"><span>                       metadataSpeciesTag     <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                       exclude                <span class="op">=</span> <span class="st">"unidentified"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">###  Including videos</span></span></span>
<span class="r-in"><span><span class="co"># sample videos are not included in package</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with videos, IDfrom = "directory", not extracting digiKam metadata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table4</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir  <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                          IDfrom <span class="op">=</span> <span class="st">"directory"</span>,</span></span>
<span class="r-in"><span>                          video  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>file_formats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jpg"</span>, <span class="st">"mp4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                        dateTimeTag  <span class="op">=</span> <span class="st">"QuickTime:CreateDate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with videos, IDfrom = "metadata", extracting digiKam metadata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec_table5</span> <span class="op">&lt;-</span> <span class="fu">recordTable</span><span class="op">(</span>inDir  <span class="op">=</span> <span class="va">wd_images_ID_species</span>,</span></span>
<span class="r-in"><span>                          IDfrom <span class="op">=</span> <span class="st">"metadata"</span>,</span></span>
<span class="r-in"><span>                          metadataSpeciesTag <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                          video  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>file_formats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jpg"</span>, <span class="st">"mp4"</span>, <span class="st">"avi"</span>, <span class="st">"mov"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                        dateTimeTag  <span class="op">=</span> <span class="st">"QuickTime:CreateDate"</span>,</span></span>
<span class="r-in"><span>                                        db_directory <span class="op">=</span> <span class="st">"C:/Users/YourName/Pictures"</span>,</span></span>
<span class="r-in"><span>                                        db_filename <span class="op">=</span> <span class="st">"digikam4.db"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>  </span></span>
<span class="r-in"><span><span class="co"># show function output if ExifTool is not available</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"ExifTool is not available. Cannot test function. Loading recordTableSample instead"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableSample</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> timeZone is not specified. Assuming UTC</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'wd_images_ID_species' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

