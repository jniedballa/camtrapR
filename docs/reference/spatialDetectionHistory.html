<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a capthist object for spatial capture-recapture analyses
from camera-trapping data — spatialDetectionHistory • camtrapR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a capthist object for spatial capture-recapture analyses
from camera-trapping data — spatialDetectionHistory"><meta property="og:description" content="This function generates spatial detection histories of individuals of a
species for spatial capture-recapture analyses with package
secr. Data are stored in a
capthist object. The capthist object
contains detection histories, camera-trap station location and possibly
individual and station-level covariates. Detection histories can have
adjustable occasion length and occasion start time (as in the function
detectionHistory)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
    <li>
      <a href="../articles/camtrapr5.html">5. Multi-species occupancy models</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jniedballa/camtrapR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a <code>capthist</code> object for spatial capture-recapture analyses
from camera-trapping data</h1>
    <small class="dont-index">Source: <a href="https://github.com/jniedballa/camtrapR/blob/HEAD/R/spatialDetectionHistory.R" class="external-link"><code>R/spatialDetectionHistory.R</code></a></small>
    <div class="hidden name"><code>spatialDetectionHistory.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function generates spatial detection histories of individuals of a
species for spatial capture-recapture analyses with package
<code><a href="https://rdrr.io/pkg/secr/man/secr-package.html" class="external-link">secr</a></code>. Data are stored in a
<code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object. The <code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object
contains detection histories, camera-trap station location and possibly
individual and station-level covariates. Detection histories can have
adjustable occasion length and occasion start time (as in the function
<code><a href="detectionHistory.html">detectionHistory</a></code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spatialDetectionHistory</span><span class="op">(</span></span>
<span>  <span class="va">recordTableIndividual</span>,</span>
<span>  <span class="va">species</span>,</span>
<span>  <span class="va">camOp</span>,</span>
<span>  <span class="va">CTtable</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binary"</span>, <span class="st">"count"</span><span class="op">)</span>,</span>
<span>  stationCol <span class="op">=</span> <span class="st">"Station"</span>,</span>
<span>  speciesCol <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>  <span class="va">sessionCol</span>,</span>
<span>  <span class="va">Xcol</span>,</span>
<span>  <span class="va">Ycol</span>,</span>
<span>  <span class="va">stationCovariateCols</span>,</span>
<span>  <span class="va">individualCol</span>,</span>
<span>  <span class="va">individualCovariateCols</span>,</span>
<span>  recordDateTimeCol <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span>
<span>  recordDateTimeFormat <span class="op">=</span> <span class="st">"ymd HMS"</span>,</span>
<span>  <span class="va">occasionLength</span>,</span>
<span>  <span class="va">minActiveDaysPerOccasion</span>,</span>
<span>  occasionStartTime <span class="op">=</span> <span class="st">"deprecated"</span>,</span>
<span>  <span class="va">maxNumberDays</span>,</span>
<span>  <span class="va">day1</span>,</span>
<span>  <span class="va">buffer</span>,</span>
<span>  includeEffort <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scaleEffort <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  binaryEffort <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">timeZone</span>,</span>
<span>  <span class="va">makeRMarkInput</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>recordTableIndividual</dt>
<dd><p>data.frame. the record table with individual
IDs created by <code><a href="recordTableIndividual.html">recordTableIndividual</a></code></p></dd>


<dt>species</dt>
<dd><p>character. the species for which to compute the detection
history</p></dd>


<dt>camOp</dt>
<dd><p>The camera operability matrix as created by
<code><a href="cameraOperation.html">cameraOperation</a></code></p></dd>


<dt>CTtable</dt>
<dd><p>data.frame. contains station IDs and coordinates. Same as
used in <code><a href="cameraOperation.html">cameraOperation</a></code>.</p></dd>


<dt>output</dt>
<dd><p>character. Return individual counts ("count") or binary
observations ("binary")?</p></dd>


<dt>stationCol</dt>
<dd><p>character. name of the column specifying Station ID in
<code>recordTableIndividual</code> and <code>CTtable</code></p></dd>


<dt>speciesCol</dt>
<dd><p>character. name of the column specifying species in
<code>recordTableIndividual</code></p></dd>


<dt>sessionCol</dt>
<dd><p>character. name of the column specifying session IDs,
either in <code>recordTableIndividual</code> or in <code>CTtable</code>. See 'Details'
for more information. Session ID values must be a sequence of integer
numbers beginning with 1 (i.e., 1,2,3,...).</p></dd>


<dt>Xcol</dt>
<dd><p>character. name of the column specifying x coordinates in
<code>CTtable</code></p></dd>


<dt>Ycol</dt>
<dd><p>character. name of the column specifying y coordinates in
<code>CTtable</code></p></dd>


<dt>stationCovariateCols</dt>
<dd><p>character. name of the column(s) specifying
station-level covariates in <code>CTtable</code></p></dd>


<dt>individualCol</dt>
<dd><p>character. name of the column specifying individual IDs
in <code>recordTableIndividual</code></p></dd>


<dt>individualCovariateCols</dt>
<dd><p>character. name of the column(s) specifying
individual covariates in <code>recordTableIndividual</code></p></dd>


<dt>recordDateTimeCol</dt>
<dd><p>character. name of the column specifying date and
time in <code>recordTableIndividual</code></p></dd>


<dt>recordDateTimeFormat</dt>
<dd><p>format of column <code>recordDateTimeCol</code> in
<code>recordTableIndividual</code></p></dd>


<dt>occasionLength</dt>
<dd><p>integer. occasion length in days</p></dd>


<dt>minActiveDaysPerOccasion</dt>
<dd><p>integer. minimum number of active trap days
for occasions to be included (optional)</p></dd>


<dt>occasionStartTime</dt>
<dd><p>(DEPRECATED) integer. time of day (the full hour)
at which to begin occasions. Please use argument <code>occasionStartTime</code> in
<code><a href="cameraOperation.html">cameraOperation</a></code> instead.</p></dd>


<dt>maxNumberDays</dt>
<dd><p>integer. maximum number of trap days per station
(optional)</p></dd>


<dt>day1</dt>
<dd><p>character. When should occasions begin: station setup date
("station"), first day of survey ("survey"), a specific date (e.g.
"2015-12-31")?</p></dd>


<dt>buffer</dt>
<dd><p>integer. Makes the first occasion begin a number of days after
station setup. (optional)</p></dd>


<dt>includeEffort</dt>
<dd><p>logical. Include trapping effort (number of active
camera trap days per station and occasion) as usage in
<code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object?</p></dd>


<dt>scaleEffort</dt>
<dd><p>logical. scale and center effort matrix to mean = 0 and
sd = 1? Currently not used. Must be FALSE.</p></dd>


<dt>binaryEffort</dt>
<dd><p>logical. Should effort be binary (1 if &gt;1 active day per
occasion, 0 otherwise)?</p></dd>


<dt>timeZone</dt>
<dd><p>character. Must be a value returned by
<code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">OlsonNames</a></code></p></dd>


<dt>makeRMarkInput</dt>
<dd><p>logical. If <code>FALSE</code>, output will be a data frame
for RMark. If <code>FALSE</code> or not specified, a secr
<code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Output depends on argument <code>makeRMarkInput</code>:</p>
<dl><dt>list("makeRMarkInput = FALSE")</dt>
<dd><p>A <code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object</p></dd>

<dt>list("makeRMarkInput = TRUE")</dt>
<dd><p>A data frame for use in RMark</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The function creates a <code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object by combining
three different objects: 1) a record table of identified individuals of a
species, 2) a camera trap station table with station coordinates and 3) a
camera operation matrix computed with <code><a href="cameraOperation.html">cameraOperation</a></code>. The
record table must contain a column with individual IDs and optionally
individual covariates. The camera trap station table must contain station
coordinates and optionally station-level covariates. The camera operation
matrix provides the dates stations were active or not and the number of
active stations.</p>
<p><code>day1</code> defines if each stations detection history will begin on that
station's setup day (<code>day1 = "station"</code>) or if all station's detection
histories have a common origin (the day the first station was set up if
<code>day1 = "survey"</code> or a fixed date if, e.g. <code>day1 = "2015-12-31"</code>).</p>
<p><code>includeEffort</code> controls whether an effort matrix is computed or not.
If TRUE, effort will be used for object <code><a href="https://rdrr.io/pkg/secr/man/usage.html" class="external-link">usage</a></code>
information in a <code><a href="https://rdrr.io/pkg/secr/man/traps.html" class="external-link">traps</a></code>. <code>binaryEffort</code> makes the
effort information binary. <code>scaleEffort</code> is currently not used and must
be set to FALSE. The reason is that <code><a href="https://rdrr.io/pkg/secr/man/usage.html" class="external-link">usage</a></code> can only be
either binary, or nonnegative real values, whereas scaling effort would
return negative values.</p>
<p>The number of days that are aggregated is controlled by
<code>occasionLength</code>. <code>occasionStartTime</code> will be removed from the
function. It has moved to <code><a href="cameraOperation.html">cameraOperation</a></code>, to ensure daily
effort is computed correctly and takes the occasion start time into
account.<!-- %\code{occasionStartTime} can be used to make occasions begin -->
another hour than midnight (the default). This may be relevant for nocturnal
animals, in which 1 whole night would be considered an occasion.</p>
<p>Output can be returned as individual counts per occasion (<code>output =
"count"</code>) or as binary observation (<code>output = "binary"</code>).</p>
<p>Argument <code>sessionCol</code> can be used to a create multi-session
<code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> object. There are two different ways in which
the argument is interpreted. It depends on whether a column with the name
you specify in argument <code>sessionCol</code> exists in
<code>recordTableIndividual</code> or in <code>CTtable</code>. If <code>sessionCol</code> is
found in <code>recordTableIndividual</code>, the records will be assigned to the
specified sessions, and it will be assumed that all camera trap station were
used in all sessions. Alternatively, if <code>sessionCol</code> is found
in<code>CTtable</code>, it will be assumed that only a subset of stations was used
in each session, and the records will be assigned automatically (using the
station IDs to identify which session they belong into). In both cases,
session information must be provided as a sequence of integer numbers
beginnign with 1, i.e., you provide the session number directly in
<code>sessionCol</code>. See <code><a href="https://rdrr.io/pkg/secr/man/session.html" class="external-link">session</a></code> for more information
about sessions in <span class="pkg">secr</span>.</p>
<p><code><a href="https://rdrr.io/pkg/secr/man/capthist.html" class="external-link">capthist</a></code> objects (as created by
<code>spatialDetectionHistory</code> for spatial capture-recapture
analyses) expect the units of coordinates (<code>Xcol</code> and <code>col</code> in
<code>CTtable</code>) to be meters. Therefore, please use a suitable coordinate
system (e.g. UTM).</p>
<p><code>recordDateTimeFormat</code> defaults to the "YYYY-MM-DD HH:MM:SS"
convention, e.g. "2014-09-30 22:59:59". <code>recordDateTimeFormat</code> can be
interpreted either by base-R via <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code> or in
<span class="pkg">lubridate</span> via <code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">parse_date_time</a></code> (argument
"orders"). <span class="pkg">lubridate</span> will be used if there are no "%" characters in
<code>recordDateTimeFormat</code>.</p>
<p>For "YYYY-MM-DD HH:MM:SS", <code>recordDateTimeFormat</code> would be either
"%Y-%m-%d %H:%M:%S" or "ymd HMS". For details on how to specify date
and time formats in R see <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code> or
<code><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html" class="external-link">parse_date_time</a></code>.</p>
    </div>
    <div id="warning-">
    <h2>Warning </h2>
    <p>Please note the section about defining argument
<code>timeZone</code> in the vignette on data extraction (accessible via
<code>vignette("DataExtraction")</code> or online
(<a href="https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf" class="external-link">https://cran.r-project.org/package=camtrapR/vignettes/camtrapr3.pdf</a>)).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><span class="pkg">secr</span> <span class="pkg">RMark</span></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Juergen Niedballa</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableIndividualSample</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtraps</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create camera operation matrix (with problems/malfunction)</span></span></span>
<span class="r-in"><span><span class="va">camop_problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable      <span class="op">=</span> <span class="va">camtraps</span>,</span></span>
<span class="r-in"><span>                                 stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                                 setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span></span>
<span class="r-in"><span>                                 retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span></span>
<span class="r-in"><span>                                 writecsv     <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                 hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                 dateFormat   <span class="op">=</span> <span class="st">"dmy"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sdh</span> <span class="op">&lt;-</span> <span class="fu">spatialDetectionHistory</span><span class="op">(</span>recordTableIndividual <span class="op">=</span> <span class="va">recordTableIndividualSample</span>,</span></span>
<span class="r-in"><span>                               species               <span class="op">=</span> <span class="st">"LeopardCat"</span>,</span></span>
<span class="r-in"><span>                               camOp                 <span class="op">=</span> <span class="va">camop_problem</span>,</span></span>
<span class="r-in"><span>                               CTtable               <span class="op">=</span> <span class="va">camtraps</span>,</span></span>
<span class="r-in"><span>                               output                <span class="op">=</span> <span class="st">"binary"</span>,</span></span>
<span class="r-in"><span>                               stationCol            <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                               speciesCol            <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                               Xcol                  <span class="op">=</span> <span class="st">"utm_x"</span>,</span></span>
<span class="r-in"><span>                               Ycol                  <span class="op">=</span> <span class="st">"utm_y"</span>,</span></span>
<span class="r-in"><span>                               individualCol         <span class="op">=</span> <span class="st">"Individual"</span>,</span></span>
<span class="r-in"><span>                               recordDateTimeCol     <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                               recordDateTimeFormat  <span class="op">=</span> <span class="st">"ymd HMS"</span>,</span></span>
<span class="r-in"><span>                               occasionLength        <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                               day1                  <span class="op">=</span> <span class="st">"survey"</span>,</span></span>
<span class="r-in"><span>                               includeEffort         <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                               timeZone              <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># missing space in species = "LeopardCat" was introduced by recordTableIndividual</span></span></span>
<span class="r-in"><span><span class="co"># (because of CRAN package policies.</span></span></span>
<span class="r-in"><span><span class="co"># In your data you can have spaces in your directory names)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sdh</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object class       capthist </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector type      proximity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector number    3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average spacing    2258.871 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x-range            523000 526000 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y-range            604000 607050 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Usage range by occasion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1  2  3  4   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min 7.5 10 10 10 0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max 9.5 10 10 10 4.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Counts by occasion </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   1 2 3 4 5 Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n                 2 2 3 2 1    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> u                 2 0 1 0 0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> f                 0 1 0 2 0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M(t+1)            2 2 3 3 3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> losses            0 0 0 0 0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detections        3 4 4 3 1    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors visited 2 3 3 2 1    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors used    3 3 3 3 2    14</span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sdh</span>, tracks <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>track for repeat detections on same occasion joins points in arbitrary sequence</span>
<span class="r-plt img"><img src="spatialDetectionHistory-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">## multi-season capthist object</span></span></span>
<span class="r-in"><span>  <span class="co"># see vignette "3. Extracting Data from Camera Trapping Images, creating occupancy &amp; secr input"</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">camtrapsMultiSeason</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">[</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span> <span class="op">==</span> <span class="fl">2009</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span><span class="op">[</span><span class="va">camtrapsMultiSeason</span><span class="op">$</span><span class="va">session</span> <span class="op">==</span> <span class="fl">2010</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">recordTableIndividualSampleMultiSeason</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># create camera operation matrix (with problems/malfunction)</span></span></span>
<span class="r-in"><span>  <span class="va">camop_session</span> <span class="op">&lt;-</span> <span class="fu"><a href="cameraOperation.html">cameraOperation</a></span><span class="op">(</span>CTtable         <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span></span>
<span class="r-in"><span>                                      stationCol   <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                                      setupCol     <span class="op">=</span> <span class="st">"Setup_date"</span>,</span></span>
<span class="r-in"><span>                                      sessionCol   <span class="op">=</span> <span class="st">"session"</span>,</span></span>
<span class="r-in"><span>                                      retrievalCol <span class="op">=</span> <span class="st">"Retrieval_date"</span>,</span></span>
<span class="r-in"><span>                                      hasProblems  <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                                      dateFormat   <span class="op">=</span> <span class="st">"dmy"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sdh_multi</span> <span class="op">&lt;-</span> <span class="fu">spatialDetectionHistory</span><span class="op">(</span>recordTableIndividual <span class="op">=</span> <span class="va">recordTableIndividualSampleMultiSeason</span>,</span></span>
<span class="r-in"><span>                               species               <span class="op">=</span> <span class="st">"LeopardCat"</span>,</span></span>
<span class="r-in"><span>                               output                <span class="op">=</span> <span class="st">"binary"</span>,</span></span>
<span class="r-in"><span>                               camOp                 <span class="op">=</span> <span class="va">camop_session</span>,</span></span>
<span class="r-in"><span>                               CTtable               <span class="op">=</span> <span class="va">camtrapsMultiSeason</span>,</span></span>
<span class="r-in"><span>                               stationCol            <span class="op">=</span> <span class="st">"Station"</span>,</span></span>
<span class="r-in"><span>                               speciesCol            <span class="op">=</span> <span class="st">"Species"</span>,</span></span>
<span class="r-in"><span>                               sessionCol            <span class="op">=</span> <span class="st">"session"</span>,</span></span>
<span class="r-in"><span>                               Xcol                  <span class="op">=</span> <span class="st">"utm_x"</span>,</span></span>
<span class="r-in"><span>                               Ycol                  <span class="op">=</span> <span class="st">"utm_y"</span>,</span></span>
<span class="r-in"><span>                               individualCol         <span class="op">=</span> <span class="st">"Individual"</span>,</span></span>
<span class="r-in"><span>                               recordDateTimeCol     <span class="op">=</span> <span class="st">"DateTimeOriginal"</span>,</span></span>
<span class="r-in"><span>                               recordDateTimeFormat  <span class="op">=</span> <span class="st">"ymd HMS"</span>,</span></span>
<span class="r-in"><span>                               occasionLength        <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                               day1                  <span class="op">=</span> <span class="st">"survey"</span>,</span></span>
<span class="r-in"><span>                               includeEffort         <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                               timeZone              <span class="op">=</span> <span class="st">"Asia/Kuala_Lumpur"</span>,</span></span>
<span class="r-in"><span>                               stationCovariateCols  <span class="op">=</span> <span class="st">"utm_y"</span>,         <span class="co"># example</span></span></span>
<span class="r-in"><span>                               individualCovariateCols <span class="op">=</span> <span class="st">"Individual"</span>   <span class="co"># example</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">sdh_multi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`1`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object class       capthist </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector type      proximity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector number    3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average spacing    2258.871 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x-range            523000 526000 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y-range            604000 607050 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Usage range by occasion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1  2  3  4   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min 7.5 10 10 10 0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max 9.5 10 10 10 4.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Counts by occasion </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   1 2 3 4 5 Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n                 2 2 3 2 1    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> u                 2 0 1 0 0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> f                 0 1 0 2 0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M(t+1)            2 2 3 3 3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> losses            0 0 0 0 0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detections        3 4 4 3 1    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors visited 2 3 3 2 1    11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors used    3 3 3 3 2    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Individual covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Individual</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`2`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Object class       capthist </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector type      proximity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detector number    4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average spacing    2258.871 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x-range            523000 526000 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y-range            604000 607050 m </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Usage range by occasion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1  2  3  4  5 6 7  8   9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min 2.5 10 10 10  5 0 0  0 0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max 4.5 10 10 10 10 3 6 10 1.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Counts by occasion </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   1 2 3 4 5 6 7 8 9 Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n                 1 2 2 0 1 0 0 0 0     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> u                 1 1 0 0 0 0 0 0 0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> f                 0 0 2 0 0 0 0 0 0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> M(t+1)            1 2 2 2 2 2 2 2 2     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> losses            0 0 0 0 0 0 0 0 0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detections        1 2 2 0 1 0 0 0 0     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors visited 1 1 2 0 1 0 0 0 0     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> detectors used    4 4 4 4 4 1 1 1 1    24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Individual covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Individual</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sdh_multi</span>, tracks <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>screen layout does not allow for all sessions and some plots may be lost; set par mfrow</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>track for repeat detections on same occasion joins points in arbitrary sequence</span>
<span class="r-plt img"><img src="spatialDetectionHistory-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="spatialDetectionHistory-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1  2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  6 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

